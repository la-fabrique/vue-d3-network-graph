(function(P,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core"],l):(P=typeof globalThis<"u"?globalThis:P||self,l(P["vue-d3-network-graph"]={},P.Vue,P.VueUseCore))})(this,function(P,l,K){"use strict";function Pt(t,n){const e=l.ref(void 0),r=l.reactive({x:0,y:0}),o=f=>{let w,v=0;return f instanceof MouseEvent?(w=f.clientX,v=f.clientY):f instanceof TouchEvent&&(w=f.touches[0].clientX,v=f.touches[0].clientY),{x:w||0,y:v||0}},a=(f,w)=>n.value?(()=>{e.value=w,c(f,t.value.nodes()[w])})():void 0,c=(f,w)=>{let v=0,d=0;if(f&&w&&(w!=null&&w.x)&&(w!=null&&w.y)){const p=o(f);v=p.x?p.x-w.x:w.x,d=p.y?p.y-w.y:w.y}r.x=v,r.y=d},i=()=>{if(e.value!==void 0){const f=t.value.nodes()[e.value];f.fx=null,f.fy=null,u()}},u=()=>{e.value=void 0,t.value.alpha(.1),t.value.restart(),c()};return{dragStart:a,dragEnd:i,move:f=>{const w=o(f);e.value!=null&&t.value.nodes()[e.value]&&(t.value.restart(),t.value.alpha(.5),t.value.nodes()[e.value].fx=w.x-r.x,t.value.nodes()[e.value].fy=w.y-r.y)}}}function Ft(t){const n=i=>i.size||t.value.size,e=i=>i.width||t.value.size,r=i=>i.height||i.size||t.value.size,o=i=>i.color?"fill: "+i.color:"",a=(i,u=[])=>{const s=i.cssClass?i.cssClass:[];return s.push("node"),u.forEach(f=>s.push(f)),(i.fx||i.fy)&&s.push("pinned"),s};return{label:l.computed(()=>({font:{size:t.value.font.size},offset:{x:t.value.size/2+t.value.font.size/2,y:t.value.font.size/2}})),getSize:n,getWidth:e,getHeight:r,getStyle:o,getClass:a}}const tt="arrow-start",et="arrow-end";function It(t,n,e){const r=f=>typeof f.source!="number"&&typeof f.source!="string"&&typeof f.target!="number"&&typeof f.target!="string"?`M${f.source.x} ${f.source.y} L${f.target.x} ${f.target.y}`:void 0,o=f=>f.color?{stroke:f.color}:{},a=f=>({"stroke-width":t.value.width}),c=f=>["link"],i=f=>e.value&&f.twoWay?`url(#${tt})`:void 0,u=f=>e.value?`url(#${et})`:void 0,s=l.computed(()=>({arrowStart:{id:tt,refX:-(n.value/2-t.value.width),refY:0,viewBox:`0 -${5*t.value.width} ${10*t.value.width} ${10*t.value.width}`,orient:"auto",markerWidth:10+t.value.width,markerHeight:10+t.value.width,"stroke-width":"1","marker-units":"userSpaceOnUse"},arrowEnd:{id:et,refX:n.value/2+(10-t.value.width),refY:0,viewBox:`0 -${5*t.value.width} ${10*t.value.width} ${10*t.value.width}`,orient:"auto",markerWidth:10+t.value.width,markerHeight:10+t.value.width,"stroke-width":"1","marker-units":"userSpaceOnUse"}}));return{getPath:r,getAttrs:a,getClass:c,getStyle:o,getMarkerEnd:u,getMarkerStart:i,markers:s}}function $t(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return nt(this.cover(n,e),n,e,t)}function nt(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var o,a=t._root,c={data:r},i=t._x0,u=t._y0,s=t._x1,f=t._y1,w,v,d,p,g,h,y,_;if(!a)return t._root=c,t;for(;a.length;)if((g=n>=(w=(i+s)/2))?i=w:s=w,(h=e>=(v=(u+f)/2))?u=v:f=v,o=a,!(a=a[y=h<<1|g]))return o[y]=c,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),n===d&&e===p)return c.next=a,o?o[y]=c:t._root=c,t;do o=o?o[y]=new Array(4):t._root=new Array(4),(g=n>=(w=(i+s)/2))?i=w:s=w,(h=e>=(v=(u+f)/2))?u=v:f=v;while((y=h<<1|g)===(_=(p>=v)<<1|d>=w));return o[_]=a,o[y]=c,t}function Ht(t){var n,e,r=t.length,o,a,c=new Array(r),i=new Array(r),u=1/0,s=1/0,f=-1/0,w=-1/0;for(e=0;e<r;++e)isNaN(o=+this._x.call(null,n=t[e]))||isNaN(a=+this._y.call(null,n))||(c[e]=o,i[e]=a,o<u&&(u=o),o>f&&(f=o),a<s&&(s=a),a>w&&(w=a));if(u>f||s>w)return this;for(this.cover(u,s).cover(f,w),e=0;e<r;++e)nt(this,c[e],i[e],t[e]);return this}function Vt(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,o=this._x1,a=this._y1;if(isNaN(e))o=(e=Math.floor(t))+1,a=(r=Math.floor(n))+1;else{for(var c=o-e||1,i=this._root,u,s;e>t||t>=o||r>n||n>=a;)switch(s=(n<r)<<1|t<e,u=new Array(4),u[s]=i,i=u,c*=2,s){case 0:o=e+c,a=r+c;break;case 1:e=o-c,a=r+c;break;case 2:o=e+c,r=a-c;break;case 3:e=o-c,r=a-c;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._y0=r,this._x1=o,this._y1=a,this}function Yt(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function jt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function R(t,n,e,r,o){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=o}function Ut(t,n,e){var r,o=this._x0,a=this._y0,c,i,u,s,f=this._x1,w=this._y1,v=[],d=this._root,p,g;for(d&&v.push(new R(d,o,a,f,w)),e==null?e=1/0:(o=t-e,a=n-e,f=t+e,w=n+e,e*=e);p=v.pop();)if(!(!(d=p.node)||(c=p.x0)>f||(i=p.y0)>w||(u=p.x1)<o||(s=p.y1)<a))if(d.length){var h=(c+u)/2,y=(i+s)/2;v.push(new R(d[3],h,y,u,s),new R(d[2],c,y,h,s),new R(d[1],h,i,u,y),new R(d[0],c,i,h,y)),(g=(n>=y)<<1|t>=h)&&(p=v[v.length-1],v[v.length-1]=v[v.length-1-g],v[v.length-1-g]=p)}else{var _=t-+this._x.call(null,d.data),k=n-+this._y.call(null,d.data),x=_*_+k*k;if(x<e){var N=Math.sqrt(e=x);o=t-N,a=n-N,f=t+N,w=n+N,r=d.data}}return r}function Wt(t){if(isNaN(f=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,r,o,a,c=this._x0,i=this._y0,u=this._x1,s=this._y1,f,w,v,d,p,g,h,y;if(!e)return this;if(e.length)for(;;){if((p=f>=(v=(c+u)/2))?c=v:u=v,(g=w>=(d=(i+s)/2))?i=d:s=d,n=e,!(e=e[h=g<<1|p]))return this;if(!e.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(r=n,y=h)}for(;e.data!==t;)if(o=e,!(e=e.next))return this;return(a=e.next)&&delete e.next,o?(a?o.next=a:delete o.next,this):n?(a?n[h]=a:delete n[h],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[y]=e:this._root=e),this):(this._root=a,this)}function Gt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Xt(){return this._root}function Kt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Qt(t){var n=[],e,r=this._root,o,a,c,i,u;for(r&&n.push(new R(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,a=e.x0,c=e.y0,i=e.x1,u=e.y1)&&r.length){var s=(a+i)/2,f=(c+u)/2;(o=r[3])&&n.push(new R(o,s,f,i,u)),(o=r[2])&&n.push(new R(o,a,f,s,u)),(o=r[1])&&n.push(new R(o,s,c,i,f)),(o=r[0])&&n.push(new R(o,a,c,s,f))}return this}function Zt(t){var n=[],e=[],r;for(this._root&&n.push(new R(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var o=r.node;if(o.length){var a,c=r.x0,i=r.y0,u=r.x1,s=r.y1,f=(c+u)/2,w=(i+s)/2;(a=o[0])&&n.push(new R(a,c,i,f,w)),(a=o[1])&&n.push(new R(a,f,i,u,w)),(a=o[2])&&n.push(new R(a,c,w,f,s)),(a=o[3])&&n.push(new R(a,f,w,u,s))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Jt(t){return t[0]}function qt(t){return arguments.length?(this._x=t,this):this._x}function te(t){return t[1]}function ee(t){return arguments.length?(this._y=t,this):this._y}function Q(t,n,e){var r=new Z(n??Jt,e??te,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Z(t,n,e,r,o,a){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=o,this._y1=a,this._root=void 0}function rt(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var S=Q.prototype=Z.prototype;S.copy=function(){var t=new Z(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=rt(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(r=n.source[o])&&(r.length?e.push({source:r,target:n.target[o]=new Array(4)}):n.target[o]=rt(r));return t},S.add=$t,S.addAll=Ht,S.cover=Vt,S.data=Yt,S.extent=jt,S.find=Ut,S.remove=Wt,S.removeAll=Gt,S.root=Xt,S.size=Kt,S.visit=Qt,S.visitAfter=Zt,S.x=qt,S.y=ee;function B(t){return function(){return t}}function F(t){return(t()-.5)*1e-6}function ne(t){return t.x+t.vx}function re(t){return t.y+t.vy}function ie(t){var n,e,r,o=1,a=1;typeof t!="function"&&(t=B(t==null?1:+t));function c(){for(var s,f=n.length,w,v,d,p,g,h,y=0;y<a;++y)for(w=Q(n,ne,re).visitAfter(i),s=0;s<f;++s)v=n[s],g=e[v.index],h=g*g,d=v.x+v.vx,p=v.y+v.vy,w.visit(_);function _(k,x,N,z,T){var M=k.data,D=k.r,A=g+D;if(M){if(M.index>v.index){var L=d-M.x-M.vx,b=p-M.y-M.vy,E=L*L+b*b;E<A*A&&(L===0&&(L=F(r),E+=L*L),b===0&&(b=F(r),E+=b*b),E=(A-(E=Math.sqrt(E)))/E*o,v.vx+=(L*=E)*(A=(D*=D)/(h+D)),v.vy+=(b*=E)*A,M.vx-=L*(A=1-A),M.vy-=b*A)}return}return x>d+A||z<d-A||N>p+A||T<p-A}}function i(s){if(s.data)return s.r=e[s.data.index];for(var f=s.r=0;f<4;++f)s[f]&&s[f].r>s.r&&(s.r=s[f].r)}function u(){if(n){var s,f=n.length,w;for(e=new Array(f),s=0;s<f;++s)w=n[s],e[w.index]=+t(w,s,n)}}return c.initialize=function(s,f){n=s,r=f,u()},c.iterations=function(s){return arguments.length?(a=+s,c):a},c.strength=function(s){return arguments.length?(o=+s,c):o},c.radius=function(s){return arguments.length?(t=typeof s=="function"?s:B(+s),u(),c):t},c}function oe(t){return t.index}function it(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function le(t){var n=oe,e=w,r,o=B(30),a,c,i,u,s,f=1;t==null&&(t=[]);function w(h){return 1/Math.min(i[h.source.index],i[h.target.index])}function v(h){for(var y=0,_=t.length;y<f;++y)for(var k=0,x,N,z,T,M,D,A;k<_;++k)x=t[k],N=x.source,z=x.target,T=z.x+z.vx-N.x-N.vx||F(s),M=z.y+z.vy-N.y-N.vy||F(s),D=Math.sqrt(T*T+M*M),D=(D-a[k])/D*h*r[k],T*=D,M*=D,z.vx-=T*(A=u[k]),z.vy-=M*A,N.vx+=T*(A=1-A),N.vy+=M*A}function d(){if(c){var h,y=c.length,_=t.length,k=new Map(c.map((N,z)=>[n(N,z,c),N])),x;for(h=0,i=new Array(y);h<_;++h)x=t[h],x.index=h,typeof x.source!="object"&&(x.source=it(k,x.source)),typeof x.target!="object"&&(x.target=it(k,x.target)),i[x.source.index]=(i[x.source.index]||0)+1,i[x.target.index]=(i[x.target.index]||0)+1;for(h=0,u=new Array(_);h<_;++h)x=t[h],u[h]=i[x.source.index]/(i[x.source.index]+i[x.target.index]);r=new Array(_),p(),a=new Array(_),g()}}function p(){if(c)for(var h=0,y=t.length;h<y;++h)r[h]=+e(t[h],h,t)}function g(){if(c)for(var h=0,y=t.length;h<y;++h)a[h]=+o(t[h],h,t)}return v.initialize=function(h,y){c=h,s=y,d()},v.links=function(h){return arguments.length?(t=h,d(),v):t},v.id=function(h){return arguments.length?(n=h,v):n},v.iterations=function(h){return arguments.length?(f=+h,v):f},v.strength=function(h){return arguments.length?(e=typeof h=="function"?h:B(+h),p(),v):e},v.distance=function(h){return arguments.length?(o=typeof h=="function"?h:B(+h),g(),v):o},v}var se={value:()=>{}};function ot(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new U(e)}function U(t){this._=t}function ae(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}U.prototype=ot.prototype={constructor:U,on:function(t,n){var e=this._,r=ae(t+"",e),o,a=-1,c=r.length;if(arguments.length<2){for(;++a<c;)if((o=(t=r[a]).type)&&(o=fe(e[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<c;)if(o=(t=r[a]).type)e[o]=lt(e[o],t.name,n);else if(n==null)for(o in e)e[o]=lt(e[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new U(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,a;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,o=a.length;r<o;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,a=r.length;o<a;++o)r[o].value.apply(n,e)}};function fe(t,n){for(var e=0,r=t.length,o;e<r;++e)if((o=t[e]).name===n)return o.value}function lt(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=se,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var $=0,H=0,V=0,st=1e3,W,Y,G=0,I=0,X=0,j=typeof performance=="object"&&performance.now?performance:Date,at=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ft(){return I||(at(ce),I=j.now()+X)}function ce(){I=0}function J(){this._call=this._time=this._next=null}J.prototype=ct.prototype={constructor:J,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?ft():+e)+(n==null?0:+n),!this._next&&Y!==this&&(Y?Y._next=this:W=this,Y=this),this._call=t,this._time=e,q()},stop:function(){this._call&&(this._call=null,this._time=1/0,q())}};function ct(t,n,e){var r=new J;return r.restart(t,n,e),r}function ue(){ft(),++$;for(var t=W,n;t;)(n=I-t._time)>=0&&t._call.call(void 0,n),t=t._next;--$}function ut(){I=(G=j.now())+X,$=H=0;try{ue()}finally{$=0,ge(),I=0}}function he(){var t=j.now(),n=t-G;n>st&&(X-=n,G=t)}function ge(){for(var t,n=W,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:W=e);Y=t,q(r)}function q(t){if(!$){H&&(H=clearTimeout(H));var n=t-I;n>24?(t<1/0&&(H=setTimeout(ut,t-j.now()-X)),V&&(V=clearInterval(V))):(V||(G=j.now(),V=setInterval(he,st)),$=1,at(ut))}}const de=1664525,ye=1013904223,ht=4294967296;function we(){let t=1;return()=>(t=(de*t+ye)%ht)/ht}function ve(t){return t.x}function _e(t){return t.y}var xe=10,pe=Math.PI*(3-Math.sqrt(5));function me(t){var n,e=1,r=.001,o=1-Math.pow(r,1/300),a=0,c=.6,i=new Map,u=ct(w),s=ot("tick","end"),f=we();t==null&&(t=[]);function w(){v(),s.call("tick",n),e<r&&(u.stop(),s.call("end",n))}function v(g){var h,y=t.length,_;g===void 0&&(g=1);for(var k=0;k<g;++k)for(e+=(a-e)*o,i.forEach(function(x){x(e)}),h=0;h<y;++h)_=t[h],_.fx==null?_.x+=_.vx*=c:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=c:(_.y=_.fy,_.vy=0);return n}function d(){for(var g=0,h=t.length,y;g<h;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var _=xe*Math.sqrt(.5+g),k=g*pe;y.x=_*Math.cos(k),y.y=_*Math.sin(k)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(t,f),g}return d(),n={tick:v,restart:function(){return u.restart(w),n},stop:function(){return u.stop(),n},nodes:function(g){return arguments.length?(t=g,d(),i.forEach(p),n):t},alpha:function(g){return arguments.length?(e=+g,n):e},alphaMin:function(g){return arguments.length?(r=+g,n):r},alphaDecay:function(g){return arguments.length?(o=+g,n):+o},alphaTarget:function(g){return arguments.length?(a=+g,n):a},velocityDecay:function(g){return arguments.length?(c=1-g,n):1-c},randomSource:function(g){return arguments.length?(f=g,i.forEach(p),n):f},force:function(g,h){return arguments.length>1?(h==null?i.delete(g):i.set(g,p(h)),n):i.get(g)},find:function(g,h,y){var _=0,k=t.length,x,N,z,T,M;for(y==null?y=1/0:y*=y,_=0;_<k;++_)T=t[_],x=g-T.x,N=h-T.y,z=x*x+N*N,z<y&&(M=T,y=z);return M},on:function(g,h){return arguments.length>1?(s.on(g,h),n):s.on(g)}}}function ke(){var t,n,e,r,o=B(-30),a,c=1,i=1/0,u=.81;function s(d){var p,g=t.length,h=Q(t,ve,_e).visitAfter(w);for(r=d,p=0;p<g;++p)n=t[p],h.visit(v)}function f(){if(t){var d,p=t.length,g;for(a=new Array(p),d=0;d<p;++d)g=t[d],a[g.index]=+o(g,d,t)}}function w(d){var p=0,g,h,y=0,_,k,x;if(d.length){for(_=k=x=0;x<4;++x)(g=d[x])&&(h=Math.abs(g.value))&&(p+=g.value,y+=h,_+=h*g.x,k+=h*g.y);d.x=_/y,d.y=k/y}else{g=d,g.x=g.data.x,g.y=g.data.y;do p+=a[g.data.index];while(g=g.next)}d.value=p}function v(d,p,g,h){if(!d.value)return!0;var y=d.x-n.x,_=d.y-n.y,k=h-p,x=y*y+_*_;if(k*k/u<x)return x<i&&(y===0&&(y=F(e),x+=y*y),_===0&&(_=F(e),x+=_*_),x<c&&(x=Math.sqrt(c*x)),n.vx+=y*d.value*r/x,n.vy+=_*d.value*r/x),!0;if(d.length||x>=i)return;(d.data!==n||d.next)&&(y===0&&(y=F(e),x+=y*y),_===0&&(_=F(e),x+=_*_),x<c&&(x=Math.sqrt(c*x)));do d.data!==n&&(k=a[d.data.index]*r/x,n.vx+=y*k,n.vy+=_*k);while(d=d.next)}return s.initialize=function(d,p){t=d,e=p,f()},s.strength=function(d){return arguments.length?(o=typeof d=="function"?d:B(+d),f(),s):o},s.distanceMin=function(d){return arguments.length?(c=d*d,s):Math.sqrt(c)},s.distanceMax=function(d){return arguments.length?(i=d*d,s):Math.sqrt(i)},s.theta=function(d){return arguments.length?(u=d*d,s):Math.sqrt(u)},s}function Ne(t){var n=B(.1),e,r,o;typeof t!="function"&&(t=B(t==null?0:+t));function a(i){for(var u=0,s=e.length,f;u<s;++u)f=e[u],f.vx+=(o[u]-f.x)*r[u]*i}function c(){if(e){var i,u=e.length;for(r=new Array(u),o=new Array(u),i=0;i<u;++i)r[i]=isNaN(o[i]=+t(e[i],i,e))?0:+n(e[i],i,e)}}return a.initialize=function(i){e=i,c()},a.strength=function(i){return arguments.length?(n=typeof i=="function"?i:B(+i),c(),a):n},a.x=function(i){return arguments.length?(t=typeof i=="function"?i:B(+i),c(),a):t},a}function Ee(t){var n=B(.1),e,r,o;typeof t!="function"&&(t=B(t==null?0:+t));function a(i){for(var u=0,s=e.length,f;u<s;++u)f=e[u],f.vy+=(o[u]-f.y)*r[u]*i}function c(){if(e){var i,u=e.length;for(r=new Array(u),o=new Array(u),i=0;i<u;++i)r[i]=isNaN(o[i]=+t(e[i],i,e))?0:+n(e[i],i,e)}}return a.initialize=function(i){e=i,c()},a.strength=function(i){return arguments.length?(n=typeof i=="function"?i:B(+i),c(),a):n},a.y=function(i){return arguments.length?(t=typeof i=="function"?i:B(+i),c(),a):t},a}const Me="X",Ae="Y",ze="charge",Te="link",Ce="collide",gt=.01,dt=.1,be=Math.log(gt)/Math.log(1-dt);function yt(t,n,e,r){const o=l.reactive({nodes:[],links:[]}),a=async()=>{i.value.stop(),o.nodes=t.value.map(u=>l.toRaw(u)),o.links=n.value.map(u=>l.toRaw(u)),i.value=c(),r.value.static?i.value.tick(be):i.value.restart()},c=()=>{const u=me().stop().alphaMin(gt).alphaDecay(dt).nodes(o.nodes);return u.force(Me,Ne(e.value.width/2).strength(r.value.force.x)),u.force(Ae,Ee(e.value.height/2).strength(r.value.force.y)),u.force(ze,ke().strength(r.value.force.charge)),u.force(Ce,ie(r.value.force.collide)),u.force(Te,le(o.links).id(s=>{if(!("id"in s))throw new Error("Node id is undefined");return s.id})),u},i=l.ref(c());return K.watchDebounced([()=>t.value.length,()=>n.value.length,e],async()=>a(),{debounce:100,maxWait:1e3}),K.watchDebounced(()=>r.value,async()=>a(),{deep:!0,debounce:100,maxWait:1e3}),{simulation:i,refresh:a,graph:o}}const De=.5,Re=.5,Se=-300,Be=40,Le=10,Oe=2,Pe=45,Fe=t=>{const n=l.computed(()=>{var c,i,u,s,f,w,v,d,p,g,h,y,_,k,x,N,z,T,M,D,A,L,b,E,m,O,C,wt,vt,_t,xt,pt,mt,kt,Nt,Et,Mt,At,zt,Tt,Ct,bt,Dt,Rt,St,Bt,Lt,Ot;return{node:{stroke:((u=(i=(c=t.value)==null?void 0:c.nodes)==null?void 0:i.colors)==null?void 0:u.stroke)||"#E2EB98",fill:((w=(f=(s=t.value)==null?void 0:s.nodes)==null?void 0:f.colors)==null?void 0:w.fill)||"#93A392",selected:{stroke:((g=(p=(d=(v=t.value)==null?void 0:v.nodes)==null?void 0:d.colors)==null?void 0:p.selected)==null?void 0:g.stroke)||"#9DC4B5",fill:(k=(_=(y=(h=t.value)==null?void 0:h.nodes)==null?void 0:y.colors)==null?void 0:_.selected)==null?void 0:k.fill},hover:{stroke:"#9DC4B5",fill:(T=(z=(N=(x=t.value)==null?void 0:x.nodes)==null?void 0:N.colors)==null?void 0:z.hover)==null?void 0:T.fill},pinned:{stroke:"#9DC4B5",fill:(L=(A=(D=(M=t.value)==null?void 0:M.nodes)==null?void 0:D.colors)==null?void 0:A.pinned)==null?void 0:L.fill},label:{fill:((O=(m=(E=(b=t.value)==null?void 0:b.nodes)==null?void 0:E.colors)==null?void 0:m.label)==null?void 0:O.fill)||"#93A392"}},link:{stroke:((vt=(wt=(C=t.value)==null?void 0:C.links)==null?void 0:wt.colors)==null?void 0:vt.stroke)||"#BAD9A2",fill:(pt=(xt=(_t=t.value)==null?void 0:_t.links)==null?void 0:xt.colors)==null?void 0:pt.fill,selected:{stroke:((Et=(Nt=(kt=(mt=t.value)==null?void 0:mt.links)==null?void 0:kt.colors)==null?void 0:Nt.selected)==null?void 0:Et.stroke)||"#9DC4B5",fill:(Tt=(zt=(At=(Mt=t.value)==null?void 0:Mt.links)==null?void 0:At.colors)==null?void 0:zt.selected)==null?void 0:Tt.fill},hover:{stroke:"#9DC4B5",fill:(Rt=(Dt=(bt=(Ct=t.value)==null?void 0:Ct.links)==null?void 0:bt.colors)==null?void 0:Dt.hover)==null?void 0:Rt.fill},label:{fill:((Ot=(Lt=(Bt=(St=t.value)==null?void 0:St.links)==null?void 0:Bt.colors)==null?void 0:Lt.label)==null?void 0:Ot.fill)||"#93A392"}}}}),e=l.computed(()=>{var c,i,u,s,f,w,v,d,p,g;return{static:((i=(c=t.value)==null?void 0:c.simulation)==null?void 0:i.static)||!1,force:{x:((s=(u=t.value)==null?void 0:u.simulation)==null?void 0:s.force.x)||De,y:((w=(f=t.value)==null?void 0:f.simulation)==null?void 0:w.force.y)||Re,charge:((d=(v=t.value)==null?void 0:v.simulation)==null?void 0:d.force.charge)||Se,collide:((g=(p=t.value)==null?void 0:p.simulation)==null?void 0:g.force.collide)||Pe}}}),r=l.computed(()=>{var c,i,u,s,f;return{size:((i=(c=t.value)==null?void 0:c.nodes)==null?void 0:i.size)||Be,font:{size:((f=(s=(u=t.value)==null?void 0:u.nodes)==null?void 0:s.font)==null?void 0:f.size)||Le}}}),o=l.computed(()=>{var c,i;return{width:((i=(c=t.value)==null?void 0:c.links)==null?void 0:i.width)||Oe}}),a=l.computed(()=>{var c,i,u,s;return{draggables:((i=(c=t.value)==null?void 0:c.layout)==null?void 0:i.draggables)||!1,directed:((s=(u=t.value)==null?void 0:u.layout)==null?void 0:s.directed)||!1}});return{simulation:e,theme:n,nodes:r,links:o,layout:a}},Ie=["viewBox"],$e={key:0},He=["fill"],Ve=["fill"],Ye={id:"l-links",class:"links"},je=["id","d","marker-end","marker-start","onClick","onTouchstartPassive"],Ue={id:"l-nodes",class:"nodes"},We=["viewBox","width","height","x","y","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive","innerHTML"],Ge=["r","cx","cy","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive"],Xe=["x","y","font-size","stroke-width"],Ke=l.defineComponent({__name:"D3NetworkGraph",props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0},options:{type:Object,default:void 0}},emits:["node-click","link-click"],setup(t,{emit:n}){const e=t;l.useCssVars(b=>({b1bf8fc8:l.unref(r).node.stroke,"3b49e067":l.unref(r).node.fill,"111d0958":l.unref(r).node.selected.stroke||l.unref(r).node.stroke,"2c2b1fb8":l.unref(r).node.selected.fill||l.unref(r).node.fill,bf5ef3d6:l.unref(r).node.pinned.stroke||l.unref(r).node.stroke,"6526fa16":l.unref(r).node.pinned.fill||l.unref(r).node.fill,"863f2d9e":l.unref(r).node.hover.stroke||l.unref(r).node.stroke,cc7b57de:l.unref(r).node.hover.fill||l.unref(r).node.fill,"04dce1b8":l.unref(r).link.stroke,"82954d22":l.unref(r).link.fill,"03397502":l.unref(r).link.selected.stroke,"94b22aec":l.unref(r).link.selected.fill,"032b7e0e":l.unref(r).node.hover.stroke,"60f1fad9":l.unref(r).node.hover.fill,"6ee3ab29":l.unref(r).link.label.fill,"22f5cfbe":l.unref(r).node.label.fill}));const{theme:r,simulation:o,nodes:a,links:c,layout:i}=Fe(l.toRef(()=>e.options)),u=l.ref(null),s=l.ref({width:100,height:100});K.useResizeObserver(u,b=>{const E=b[0];E.contentRect.width===s.value.width&&E.contentRect.height===s.value.height||(s.value={width:E.contentRect.width,height:E.contentRect.height})});const{simulation:f,graph:w}=yt(l.toRef(()=>e.nodes),l.toRef(()=>e.links),s,o),{dragStart:v,dragEnd:d,move:p}=Pt(f,l.toRef(()=>i.value.draggables)),{label:g,getSize:h,getWidth:y,getClass:_,getHeight:k,getStyle:x}=Ft(a),{getPath:N,getAttrs:z,getClass:T,getStyle:M,getMarkerEnd:D,getMarkerStart:A,markers:L}=It(c,l.toRef(()=>a.value.size),l.toRef(()=>i.value.directed));return(b,E)=>(l.openBlock(),l.createElementBlock("svg",{ref_key:"svg",ref:u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin",viewBox:`0 0 ${s.value.width} ${s.value.height}`,class:"svg-container",onMouseup:E[0]||(E[0]=(...m)=>l.unref(d)&&l.unref(d)(...m)),onTouchendPassive:E[1]||(E[1]=(...m)=>l.unref(d)&&l.unref(d)(...m)),onTouchstartPassive:E[2]||(E[2]=async()=>{}),onMousemove:E[3]||(E[3]=(...m)=>l.unref(p)&&l.unref(p)(...m))},[l.unref(i).directed?(l.openBlock(),l.createElementBlock("defs",$e,[l.createElementVNode("marker",l.normalizeProps(l.guardReactiveProps(l.unref(L).arrowEnd)),[l.createElementVNode("path",{fill:l.unref(r).link.stroke,d:"M0 -5 L 10 0 L 0 5"},null,8,He)],16),l.createElementVNode("marker",l.normalizeProps(l.guardReactiveProps(l.unref(L).arrowStart)),[l.createElementVNode("path",{fill:l.unref(r).link.stroke,d:"M 10 5 L 0 0 L 10 -5"},null,8,Ve)],16)])):l.createCommentVNode("",!0),l.createElementVNode("g",Ye,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(w).links,m=>(l.openBlock(),l.createElementBlock("path",l.mergeProps({id:m.id,key:m.id,d:l.unref(N)(m)},l.unref(z)(m),{class:l.unref(T)(m.id),style:l.unref(M)(m),"marker-end":l.unref(D)(m),"marker-start":l.unref(A)(m),onClick:O=>n("link-click",O,m),onTouchstartPassive:O=>n("link-click",O,m)}),null,16,je))),128))]),l.createElementVNode("g",Ue,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(l.unref(w).nodes,(m,O)=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:O},[m.innerSVG?(l.openBlock(),l.createElementBlock("svg",{key:0,viewBox:m.innerSVG.viewBox,width:l.unref(y)(m),height:l.unref(k)(m),x:(m.x||0)-l.unref(y)(m)/2,y:(m.y||0)-l.unref(k)(m)/2,style:l.normalizeStyle(l.unref(x)(m)),title:m.name,class:l.normalizeClass(l.unref(_)(m,["node-svg"])),onClick:C=>n("node-click",C,m),onTouchendPassive:C=>n("node-click",C,m),onMousedown:l.withModifiers(C=>l.unref(v)(C,O),["prevent"]),onTouchstartPassive:l.withModifiers(C=>l.unref(v)(C,O),["prevent"]),innerHTML:m.innerSVG.innerHtml},null,46,We)):(l.openBlock(),l.createElementBlock("circle",{key:1,r:l.unref(h)(m)/2,cx:m.x||0,cy:m.y||0,style:l.normalizeStyle(l.unref(x)(m)),title:m.name,class:l.normalizeClass(l.unref(_)(m)),onClick:C=>b.$emit("node-click",C,m),onTouchendPassive:C=>b.$emit("node-click",C,m),onMousedown:l.withModifiers(C=>l.unref(v)(C,O),["prevent"]),onTouchstartPassive:l.withModifiers(C=>l.unref(v)(C,O),["prevent"])},null,46,Ge)),l.createElementVNode("text",{class:"node-label",x:(m.x||0)+l.unref(h)(m)/2+l.unref(g).font.size/2,y:(m.y||0)+l.unref(g).offset.y,"font-size":l.unref(g).font.size,"stroke-width":l.unref(g).font.size/8},l.toDisplayString(m.name),9,Xe)],64))),128))])],40,Ie))}}),Qe="";P.D3NetworkGraph=Ke,P.useSimulation=yt,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
