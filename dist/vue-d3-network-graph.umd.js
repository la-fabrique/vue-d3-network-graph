(function(P,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core"],s):(P=typeof globalThis<"u"?globalThis:P||self,s(P["vue-d3-network-graph"]={},P.Vue,P.VueUseCore))})(this,function(P,s,U){"use strict";function Lt(t,n){const e=s.ref(void 0),r=s.reactive({x:0,y:0}),o=d=>{let w,_=0;return d instanceof MouseEvent?(w=d.clientX,_=d.clientY):d instanceof TouchEvent&&(w=d.touches[0].clientX,_=d.touches[0].clientY),{x:w||0,y:_||0}},l=(d,w)=>n.value?(()=>{e.value=w,a(d,t.value.nodes()[w])})():void 0,a=(d,w)=>{let _=0,h=0;if(d&&w&&(w!=null&&w.x)&&(w!=null&&w.y)){const v=o(d);_=v.x?v.x-w.x:w.x,h=v.y?v.y-w.y:w.y}r.x=_,r.y=h},i=()=>{if(e.value!==void 0){const d=t.value.nodes()[e.value];d.fx=null,d.fy=null,f()}},f=()=>{e.value=void 0,t.value.alpha(.1),t.value.restart(),a()};return{dragStart:l,dragEnd:i,move:d=>{const w=o(d);e.value!=null&&t.value.nodes()[e.value]&&(t.value.restart(),t.value.alpha(.5),t.value.nodes()[e.value].fx=w.x-r.x,t.value.nodes()[e.value].fy=w.y-r.y)}}}function Rt(t){const n=i=>i.size||t.value.size,e=i=>i.width||t.value.size,r=i=>i.height||i.size||t.value.size,o=i=>i.color?"fill: "+i.color:"",l=(i,f=[])=>{const u=i.cssClass?i.cssClass:[];return u.push("node"),f.forEach(d=>u.push(d)),(i.fx||i.fy)&&u.push("pinned"),u};return{label:s.computed(()=>({font:{size:t.value.font.size},offset:{x:t.value.size/2+t.value.font.size/2,y:t.value.font.size/2}})),getSize:n,getWidth:e,getHeight:r,getStyle:o,getClass:l}}function Ft(t){return{getPath:l=>{if(typeof l.source!="number"&&typeof l.source!="string"&&typeof l.target!="number"&&typeof l.target!="string")return`M${l.source.x},${l.source.y}A0,0 0 0,1 ${l.target.x},${l.target.y}`},getAttrs:l=>({"stroke-width":t.value.width}),getClass:l=>["link"],getStyle:l=>l.color?{stroke:l.color}:{}}}function Ot(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return K(this.cover(n,e),n,e,t)}function K(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var o,l=t._root,a={data:r},i=t._x0,f=t._y0,u=t._x1,d=t._y1,w,_,h,v,g,c,y,p;if(!l)return t._root=a,t;for(;l.length;)if((g=n>=(w=(i+u)/2))?i=w:u=w,(c=e>=(_=(f+d)/2))?f=_:d=_,o=l,!(l=l[y=c<<1|g]))return o[y]=a,t;if(h=+t._x.call(null,l.data),v=+t._y.call(null,l.data),n===h&&e===v)return a.next=l,o?o[y]=a:t._root=a,t;do o=o?o[y]=new Array(4):t._root=new Array(4),(g=n>=(w=(i+u)/2))?i=w:u=w,(c=e>=(_=(f+d)/2))?f=_:d=_;while((y=c<<1|g)===(p=(v>=_)<<1|h>=w));return o[p]=l,o[y]=a,t}function It(t){var n,e,r=t.length,o,l,a=new Array(r),i=new Array(r),f=1/0,u=1/0,d=-1/0,w=-1/0;for(e=0;e<r;++e)isNaN(o=+this._x.call(null,n=t[e]))||isNaN(l=+this._y.call(null,n))||(a[e]=o,i[e]=l,o<f&&(f=o),o>d&&(d=o),l<u&&(u=l),l>w&&(w=l));if(f>d||u>w)return this;for(this.cover(f,u).cover(d,w),e=0;e<r;++e)K(this,a[e],i[e],t[e]);return this}function Ht(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,o=this._x1,l=this._y1;if(isNaN(e))o=(e=Math.floor(t))+1,l=(r=Math.floor(n))+1;else{for(var a=o-e||1,i=this._root,f,u;e>t||t>=o||r>n||n>=l;)switch(u=(n<r)<<1|t<e,f=new Array(4),f[u]=i,i=f,a*=2,u){case 0:o=e+a,l=r+a;break;case 1:e=o-a,l=r+a;break;case 2:o=e+a,r=l-a;break;case 3:e=o-a,r=l-a;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._y0=r,this._x1=o,this._y1=l,this}function Vt(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Yt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function C(t,n,e,r,o){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=o}function jt(t,n,e){var r,o=this._x0,l=this._y0,a,i,f,u,d=this._x1,w=this._y1,_=[],h=this._root,v,g;for(h&&_.push(new C(h,o,l,d,w)),e==null?e=1/0:(o=t-e,l=n-e,d=t+e,w=n+e,e*=e);v=_.pop();)if(!(!(h=v.node)||(a=v.x0)>d||(i=v.y0)>w||(f=v.x1)<o||(u=v.y1)<l))if(h.length){var c=(a+f)/2,y=(i+u)/2;_.push(new C(h[3],c,y,f,u),new C(h[2],a,y,c,u),new C(h[1],c,i,f,y),new C(h[0],a,i,c,y)),(g=(n>=y)<<1|t>=c)&&(v=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=v)}else{var p=t-+this._x.call(null,h.data),k=n-+this._y.call(null,h.data),x=p*p+k*k;if(x<e){var N=Math.sqrt(e=x);o=t-N,l=n-N,d=t+N,w=n+N,r=h.data}}return r}function Xt(t){if(isNaN(d=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,r,o,l,a=this._x0,i=this._y0,f=this._x1,u=this._y1,d,w,_,h,v,g,c,y;if(!e)return this;if(e.length)for(;;){if((v=d>=(_=(a+f)/2))?a=_:f=_,(g=w>=(h=(i+u)/2))?i=h:u=h,n=e,!(e=e[c=g<<1|v]))return this;if(!e.length)break;(n[c+1&3]||n[c+2&3]||n[c+3&3])&&(r=n,y=c)}for(;e.data!==t;)if(o=e,!(e=e.next))return this;return(l=e.next)&&delete e.next,o?(l?o.next=l:delete o.next,this):n?(l?n[c]=l:delete n[c],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[y]=e:this._root=e),this):(this._root=l,this)}function Gt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Ut(){return this._root}function $t(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function qt(t){var n=[],e,r=this._root,o,l,a,i,f;for(r&&n.push(new C(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,l=e.x0,a=e.y0,i=e.x1,f=e.y1)&&r.length){var u=(l+i)/2,d=(a+f)/2;(o=r[3])&&n.push(new C(o,u,d,i,f)),(o=r[2])&&n.push(new C(o,l,d,u,f)),(o=r[1])&&n.push(new C(o,u,a,i,d)),(o=r[0])&&n.push(new C(o,l,a,u,d))}return this}function Wt(t){var n=[],e=[],r;for(this._root&&n.push(new C(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var o=r.node;if(o.length){var l,a=r.x0,i=r.y0,f=r.x1,u=r.y1,d=(a+f)/2,w=(i+u)/2;(l=o[0])&&n.push(new C(l,a,i,d,w)),(l=o[1])&&n.push(new C(l,d,i,f,w)),(l=o[2])&&n.push(new C(l,a,w,d,u)),(l=o[3])&&n.push(new C(l,d,w,f,u))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Kt(t){return t[0]}function Qt(t){return arguments.length?(this._x=t,this):this._x}function Zt(t){return t[1]}function Jt(t){return arguments.length?(this._y=t,this):this._y}function Q(t,n,e){var r=new $(n??Kt,e??Zt,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function $(t,n,e,r,o,l){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=o,this._y1=l,this._root=void 0}function Z(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var T=Q.prototype=$.prototype;T.copy=function(){var t=new $(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Z(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(r=n.source[o])&&(r.length?e.push({source:r,target:n.target[o]=new Array(4)}):n.target[o]=Z(r));return t},T.add=Ot,T.addAll=It,T.cover=Ht,T.data=Vt,T.extent=Yt,T.find=jt,T.remove=Xt,T.removeAll=Gt,T.root=Ut,T.size=$t,T.visit=qt,T.visitAfter=Wt,T.x=Qt,T.y=Jt;function D(t){return function(){return t}}function R(t){return(t()-.5)*1e-6}function te(t){return t.index}function J(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function ee(t){var n=te,e=w,r,o=D(30),l,a,i,f,u,d=1;t==null&&(t=[]);function w(c){return 1/Math.min(i[c.source.index],i[c.target.index])}function _(c){for(var y=0,p=t.length;y<d;++y)for(var k=0,x,N,E,z,B,b,A;k<p;++k)x=t[k],N=x.source,E=x.target,z=E.x+E.vx-N.x-N.vx||R(u),B=E.y+E.vy-N.y-N.vy||R(u),b=Math.sqrt(z*z+B*B),b=(b-l[k])/b*c*r[k],z*=b,B*=b,E.vx-=z*(A=f[k]),E.vy-=B*A,N.vx+=z*(A=1-A),N.vy+=B*A}function h(){if(a){var c,y=a.length,p=t.length,k=new Map(a.map((N,E)=>[n(N,E,a),N])),x;for(c=0,i=new Array(y);c<p;++c)x=t[c],x.index=c,typeof x.source!="object"&&(x.source=J(k,x.source)),typeof x.target!="object"&&(x.target=J(k,x.target)),i[x.source.index]=(i[x.source.index]||0)+1,i[x.target.index]=(i[x.target.index]||0)+1;for(c=0,f=new Array(p);c<p;++c)x=t[c],f[c]=i[x.source.index]/(i[x.source.index]+i[x.target.index]);r=new Array(p),v(),l=new Array(p),g()}}function v(){if(a)for(var c=0,y=t.length;c<y;++c)r[c]=+e(t[c],c,t)}function g(){if(a)for(var c=0,y=t.length;c<y;++c)l[c]=+o(t[c],c,t)}return _.initialize=function(c,y){a=c,u=y,h()},_.links=function(c){return arguments.length?(t=c,h(),_):t},_.id=function(c){return arguments.length?(n=c,_):n},_.iterations=function(c){return arguments.length?(d=+c,_):d},_.strength=function(c){return arguments.length?(e=typeof c=="function"?c:D(+c),v(),_):e},_.distance=function(c){return arguments.length?(o=typeof c=="function"?c:D(+c),g(),_):o},_}var ne={value:()=>{}};function tt(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Y(e)}function Y(t){this._=t}function re(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}Y.prototype=tt.prototype={constructor:Y,on:function(t,n){var e=this._,r=re(t+"",e),o,l=-1,a=r.length;if(arguments.length<2){for(;++l<a;)if((o=(t=r[l]).type)&&(o=ie(e[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++l<a;)if(o=(t=r[l]).type)e[o]=et(e[o],t.name,n);else if(n==null)for(o in e)e[o]=et(e[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Y(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,l;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],r=0,o=l.length;r<o;++r)l[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,l=r.length;o<l;++o)r[o].value.apply(n,e)}};function ie(t,n){for(var e=0,r=t.length,o;e<r;++e)if((o=t[e]).name===n)return o.value}function et(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=ne,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var F=0,O=0,I=0,nt=1e3,j,H,X=0,L=0,G=0,V=typeof performance=="object"&&performance.now?performance:Date,rt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function it(){return L||(rt(oe),L=V.now()+G)}function oe(){L=0}function q(){this._call=this._time=this._next=null}q.prototype=ot.prototype={constructor:q,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?it():+e)+(n==null?0:+n),!this._next&&H!==this&&(H?H._next=this:j=this,H=this),this._call=t,this._time=e,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};function ot(t,n,e){var r=new q;return r.restart(t,n,e),r}function se(){it(),++F;for(var t=j,n;t;)(n=L-t._time)>=0&&t._call.call(void 0,n),t=t._next;--F}function st(){L=(X=V.now())+G,F=O=0;try{se()}finally{F=0,ae(),L=0}}function le(){var t=V.now(),n=t-X;n>nt&&(G-=n,X=t)}function ae(){for(var t,n=j,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:j=e);H=t,W(r)}function W(t){if(!F){O&&(O=clearTimeout(O));var n=t-L;n>24?(t<1/0&&(O=setTimeout(st,t-V.now()-G)),I&&(I=clearInterval(I))):(I||(X=V.now(),I=setInterval(le,nt)),F=1,rt(st))}}const fe=1664525,ce=1013904223,lt=4294967296;function ue(){let t=1;return()=>(t=(fe*t+ce)%lt)/lt}function he(t){return t.x}function ge(t){return t.y}var de=10,ye=Math.PI*(3-Math.sqrt(5));function we(t){var n,e=1,r=.001,o=1-Math.pow(r,1/300),l=0,a=.6,i=new Map,f=ot(w),u=tt("tick","end"),d=ue();t==null&&(t=[]);function w(){_(),u.call("tick",n),e<r&&(f.stop(),u.call("end",n))}function _(g){var c,y=t.length,p;g===void 0&&(g=1);for(var k=0;k<g;++k)for(e+=(l-e)*o,i.forEach(function(x){x(e)}),c=0;c<y;++c)p=t[c],p.fx==null?p.x+=p.vx*=a:(p.x=p.fx,p.vx=0),p.fy==null?p.y+=p.vy*=a:(p.y=p.fy,p.vy=0);return n}function h(){for(var g=0,c=t.length,y;g<c;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var p=de*Math.sqrt(.5+g),k=g*ye;y.x=p*Math.cos(k),y.y=p*Math.sin(k)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function v(g){return g.initialize&&g.initialize(t,d),g}return h(),n={tick:_,restart:function(){return f.restart(w),n},stop:function(){return f.stop(),n},nodes:function(g){return arguments.length?(t=g,h(),i.forEach(v),n):t},alpha:function(g){return arguments.length?(e=+g,n):e},alphaMin:function(g){return arguments.length?(r=+g,n):r},alphaDecay:function(g){return arguments.length?(o=+g,n):+o},alphaTarget:function(g){return arguments.length?(l=+g,n):l},velocityDecay:function(g){return arguments.length?(a=1-g,n):1-a},randomSource:function(g){return arguments.length?(d=g,i.forEach(v),n):d},force:function(g,c){return arguments.length>1?(c==null?i.delete(g):i.set(g,v(c)),n):i.get(g)},find:function(g,c,y){var p=0,k=t.length,x,N,E,z,B;for(y==null?y=1/0:y*=y,p=0;p<k;++p)z=t[p],x=g-z.x,N=c-z.y,E=x*x+N*N,E<y&&(B=z,y=E);return B},on:function(g,c){return arguments.length>1?(u.on(g,c),n):u.on(g)}}}function _e(){var t,n,e,r,o=D(-30),l,a=1,i=1/0,f=.81;function u(h){var v,g=t.length,c=Q(t,he,ge).visitAfter(w);for(r=h,v=0;v<g;++v)n=t[v],c.visit(_)}function d(){if(t){var h,v=t.length,g;for(l=new Array(v),h=0;h<v;++h)g=t[h],l[g.index]=+o(g,h,t)}}function w(h){var v=0,g,c,y=0,p,k,x;if(h.length){for(p=k=x=0;x<4;++x)(g=h[x])&&(c=Math.abs(g.value))&&(v+=g.value,y+=c,p+=c*g.x,k+=c*g.y);h.x=p/y,h.y=k/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do v+=l[g.data.index];while(g=g.next)}h.value=v}function _(h,v,g,c){if(!h.value)return!0;var y=h.x-n.x,p=h.y-n.y,k=c-v,x=y*y+p*p;if(k*k/f<x)return x<i&&(y===0&&(y=R(e),x+=y*y),p===0&&(p=R(e),x+=p*p),x<a&&(x=Math.sqrt(a*x)),n.vx+=y*h.value*r/x,n.vy+=p*h.value*r/x),!0;if(h.length||x>=i)return;(h.data!==n||h.next)&&(y===0&&(y=R(e),x+=y*y),p===0&&(p=R(e),x+=p*p),x<a&&(x=Math.sqrt(a*x)));do h.data!==n&&(k=l[h.data.index]*r/x,n.vx+=y*k,n.vy+=p*k);while(h=h.next)}return u.initialize=function(h,v){t=h,e=v,d()},u.strength=function(h){return arguments.length?(o=typeof h=="function"?h:D(+h),d(),u):o},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(i=h*h,u):Math.sqrt(i)},u.theta=function(h){return arguments.length?(f=h*h,u):Math.sqrt(f)},u}function pe(t){var n=D(.1),e,r,o;typeof t!="function"&&(t=D(t==null?0:+t));function l(i){for(var f=0,u=e.length,d;f<u;++f)d=e[f],d.vx+=(o[f]-d.x)*r[f]*i}function a(){if(e){var i,f=e.length;for(r=new Array(f),o=new Array(f),i=0;i<f;++i)r[i]=isNaN(o[i]=+t(e[i],i,e))?0:+n(e[i],i,e)}}return l.initialize=function(i){e=i,a()},l.strength=function(i){return arguments.length?(n=typeof i=="function"?i:D(+i),a(),l):n},l.x=function(i){return arguments.length?(t=typeof i=="function"?i:D(+i),a(),l):t},l}function xe(t){var n=D(.1),e,r,o;typeof t!="function"&&(t=D(t==null?0:+t));function l(i){for(var f=0,u=e.length,d;f<u;++f)d=e[f],d.vy+=(o[f]-d.y)*r[f]*i}function a(){if(e){var i,f=e.length;for(r=new Array(f),o=new Array(f),i=0;i<f;++i)r[i]=isNaN(o[i]=+t(e[i],i,e))?0:+n(e[i],i,e)}}return l.initialize=function(i){e=i,a()},l.strength=function(i){return arguments.length?(n=typeof i=="function"?i:D(+i),a(),l):n},l.y=function(i){return arguments.length?(t=typeof i=="function"?i:D(+i),a(),l):t},l}const ve="X",me="Y",ke="charge",Ne="link",at=.01,ft=.1,Ae=Math.log(at)/Math.log(1-ft);function ct(t,n,e,r){const o=s.reactive({nodes:[],links:[]}),l=async()=>{i.value.stop(),o.nodes=t.value.map(f=>s.toRaw(f)),o.links=n.value.map(f=>s.toRaw(f)),i.value=a(),r.value.static?i.value.tick(Ae):i.value.restart()},a=()=>{const f=we().stop().alphaMin(at).alphaDecay(ft).nodes(o.nodes);return f.force(ve,pe(e.value.width/2).strength(r.value.force.x)),f.force(me,xe(e.value.height/2).strength(r.value.force.y)),f.force(ke,_e().strength(r.value.force.charge)),f.force(Ne,ee(o.links).id(u=>{if(!("id"in u))throw new Error("Node id is undefined");return u.id})),f},i=s.ref(a());return U.watchDebounced([()=>t.value.length,()=>n.value.length,e],async()=>l(),{debounce:100,maxWait:1e3}),U.watchDebounced(()=>r.value,async()=>l(),{deep:!0,debounce:100,maxWait:1e3}),{simulation:i,refresh:l,graph:o}}const Ee=.5,Me=.5,ze=-350,Ce=40,Te=10,be=2,Be=t=>{const n=s.computed(()=>{var a,i,f,u,d,w,_,h,v,g,c,y,p,k,x,N,E,z,B,b,A,m,S,M,ut,ht,gt,dt,yt,wt,_t,pt,xt,vt,mt,kt,Nt,At,Et,Mt,zt,Ct,Tt,bt,Bt,Dt,St,Pt;return{node:{stroke:((f=(i=(a=t.value)==null?void 0:a.nodes)==null?void 0:i.colors)==null?void 0:f.stroke)||"#E2EB98",fill:((w=(d=(u=t.value)==null?void 0:u.nodes)==null?void 0:d.colors)==null?void 0:w.fill)||"#93A392",selected:{stroke:((g=(v=(h=(_=t.value)==null?void 0:_.nodes)==null?void 0:h.colors)==null?void 0:v.selected)==null?void 0:g.stroke)||"#9DC4B5",fill:(k=(p=(y=(c=t.value)==null?void 0:c.nodes)==null?void 0:y.colors)==null?void 0:p.selected)==null?void 0:k.fill},hover:{stroke:"#9DC4B5",fill:(z=(E=(N=(x=t.value)==null?void 0:x.nodes)==null?void 0:N.colors)==null?void 0:E.hover)==null?void 0:z.fill},pinned:{stroke:"#9DC4B5",fill:(m=(A=(b=(B=t.value)==null?void 0:B.nodes)==null?void 0:b.colors)==null?void 0:A.pinned)==null?void 0:m.fill},label:{fill:((ht=(ut=(M=(S=t.value)==null?void 0:S.nodes)==null?void 0:M.colors)==null?void 0:ut.label)==null?void 0:ht.fill)||"#93A392"}},link:{stroke:((yt=(dt=(gt=t.value)==null?void 0:gt.links)==null?void 0:dt.colors)==null?void 0:yt.stroke)||"#BAD9A2",fill:(pt=(_t=(wt=t.value)==null?void 0:wt.links)==null?void 0:_t.colors)==null?void 0:pt.fill,selected:{stroke:((kt=(mt=(vt=(xt=t.value)==null?void 0:xt.links)==null?void 0:vt.colors)==null?void 0:mt.selected)==null?void 0:kt.stroke)||"#9DC4B5",fill:(Mt=(Et=(At=(Nt=t.value)==null?void 0:Nt.links)==null?void 0:At.colors)==null?void 0:Et.selected)==null?void 0:Mt.fill},hover:{stroke:"#9DC4B5",fill:(bt=(Tt=(Ct=(zt=t.value)==null?void 0:zt.links)==null?void 0:Ct.colors)==null?void 0:Tt.hover)==null?void 0:bt.fill},label:{fill:((Pt=(St=(Dt=(Bt=t.value)==null?void 0:Bt.links)==null?void 0:Dt.colors)==null?void 0:St.label)==null?void 0:Pt.fill)||"#93A392"}}}}),e=s.computed(()=>{var a,i,f,u,d,w,_,h;return{static:((i=(a=t.value)==null?void 0:a.simulation)==null?void 0:i.static)||!1,force:{x:((u=(f=t.value)==null?void 0:f.simulation)==null?void 0:u.force.x)||Ee,y:((w=(d=t.value)==null?void 0:d.simulation)==null?void 0:w.force.y)||Me,charge:((h=(_=t.value)==null?void 0:_.simulation)==null?void 0:h.force.charge)||ze}}}),r=s.computed(()=>{var a,i,f,u,d;return{size:((i=(a=t.value)==null?void 0:a.nodes)==null?void 0:i.size)||Ce,font:{size:((d=(u=(f=t.value)==null?void 0:f.nodes)==null?void 0:u.font)==null?void 0:d.size)||Te}}}),o=s.computed(()=>{var a,i;return{width:((i=(a=t.value)==null?void 0:a.links)==null?void 0:i.width)||be}}),l=s.computed(()=>{var a,i,f,u;return{draggables:((i=(a=t.value)==null?void 0:a.layout)==null?void 0:i.draggables)||!1,directed:((u=(f=t.value)==null?void 0:f.layout)==null?void 0:u.directed)||!1}});return{simulation:e,theme:n,nodes:r,links:o,layout:l}},De=["viewBox"],Se={key:0},Pe=["refX"],Le=["fill"],Re={id:"l-links",class:"links"},Fe=["id","d","marker-end","onClick","onTouchstartPassive"],Oe={id:"l-nodes",class:"nodes"},Ie=["viewBox","width","height","x","y","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive","innerHTML"],He=["r","cx","cy","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive"],Ve=["x","y","font-size","stroke-width"],Ye=s.defineComponent({__name:"D3NetworkGraph",props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0},options:{type:Object,default:void 0}},emits:["node-click","link-click"],setup(t,{emit:n}){const e=t;s.useCssVars(b=>({dad63638:s.unref(r).node.stroke,"34131f2f":s.unref(r).node.fill,"35f92820":s.unref(r).node.selected.stroke||s.unref(r).node.stroke,"2d35e280":s.unref(r).node.selected.fill||s.unref(r).node.fill,ec949246:s.unref(r).node.pinned.stroke||s.unref(r).node.stroke,"565957bd":s.unref(r).node.pinned.fill||s.unref(r).node.fill,"45a4012e":s.unref(r).node.hover.stroke||s.unref(r).node.stroke,"0df8736e":s.unref(r).node.hover.fill||s.unref(r).node.fill,"2df38828":s.unref(r).link.stroke,"9102cf92":s.unref(r).link.fill,"325f0c92":s.unref(r).link.selected.stroke,"31c3ccc2":s.unref(r).link.selected.fill,e9651654:s.unref(r).node.hover.stroke,"1599f8be":s.unref(r).node.hover.fill,"0324b3f1":s.unref(r).link.label.fill,fa73be2e:s.unref(r).node.label.fill}));const{theme:r,simulation:o,nodes:l,links:a,layout:i}=Be(s.toRef(()=>e.options)),f=s.ref(null),u=s.ref({width:100,height:100});U.useResizeObserver(f,b=>{const A=b[0];A.contentRect.width===u.value.width&&A.contentRect.height===u.value.height||(u.value={width:A.contentRect.width,height:A.contentRect.height})});const{simulation:d,graph:w}=ct(s.toRef(()=>e.nodes),s.toRef(()=>e.links),u,o),{dragStart:_,dragEnd:h,move:v}=Lt(d,s.toRef(()=>i.value.draggables)),{label:g,getSize:c,getWidth:y,getClass:p,getHeight:k,getStyle:x}=Rt(l),{getPath:N,getAttrs:E,getClass:z,getStyle:B}=Ft(a);return(b,A)=>(s.openBlock(),s.createElementBlock("svg",{ref_key:"svg",ref:f,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin",viewBox:`0 0 ${u.value.width} ${u.value.height}`,class:"svg-container",onMouseup:A[0]||(A[0]=(...m)=>s.unref(h)&&s.unref(h)(...m)),onTouchendPassive:A[1]||(A[1]=(...m)=>s.unref(h)&&s.unref(h)(...m)),onTouchstartPassive:A[2]||(A[2]=async()=>{}),onMousemove:A[3]||(A[3]=(...m)=>s.unref(v)&&s.unref(v)(...m))},[s.unref(i).directed?(s.openBlock(),s.createElementBlock("defs",Se,[s.createElementVNode("marker",{id:"arrow",viewBox:"0 -5 10 10",refX:s.unref(l).size/2+10,refY:"0",markerWidth:"10",markerHeight:"10",orient:"auto"},[s.createElementVNode("path",{fill:s.unref(r).link.stroke,d:"M0,-5L10,0L0,5"},null,8,Le)],8,Pe)])):s.createCommentVNode("",!0),s.createElementVNode("g",Re,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(w).links,m=>(s.openBlock(),s.createElementBlock("path",s.mergeProps({id:m.id,key:m.id,d:s.unref(N)(m)},s.unref(E)(m),{class:s.unref(z)(m.id),style:s.unref(B)(m),"marker-end":s.unref(i).directed?"url(#arrow)":void 0,onClick:S=>n("link-click",S,m),onTouchstartPassive:S=>n("link-click",S,m)}),null,16,Fe))),128))]),s.createElementVNode("g",Oe,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(w).nodes,(m,S)=>(s.openBlock(),s.createElementBlock(s.Fragment,{key:S},[m.innerSVG?(s.openBlock(),s.createElementBlock("svg",{key:0,viewBox:m.innerSVG.viewBox,width:s.unref(y)(m),height:s.unref(k)(m),x:(m.x||0)-s.unref(y)(m)/2,y:(m.y||0)-s.unref(k)(m)/2,style:s.normalizeStyle(s.unref(x)(m)),title:m.name,class:s.normalizeClass(s.unref(p)(m,["node-svg"])),onClick:M=>n("node-click",M,m),onTouchendPassive:M=>n("node-click",M,m),onMousedown:s.withModifiers(M=>s.unref(_)(M,S),["prevent"]),onTouchstartPassive:s.withModifiers(M=>s.unref(_)(M,S),["prevent"]),innerHTML:m.innerSVG.innerHtml},null,46,Ie)):(s.openBlock(),s.createElementBlock("circle",{key:1,r:s.unref(c)(m)/2,cx:m.x||0,cy:m.y||0,style:s.normalizeStyle(s.unref(x)(m)),title:m.name,class:s.normalizeClass(s.unref(p)(m)),onClick:M=>b.$emit("node-click",M,m),onTouchendPassive:M=>b.$emit("node-click",M,m),onMousedown:s.withModifiers(M=>s.unref(_)(M,S),["prevent"]),onTouchstartPassive:s.withModifiers(M=>s.unref(_)(M,S),["prevent"])},null,46,He)),s.createElementVNode("text",{class:"node-label",x:(m.x||0)+s.unref(c)(m)/2+s.unref(g).font.size/2,y:(m.y||0)+s.unref(g).offset.y,"font-size":s.unref(g).font.size,"stroke-width":s.unref(g).font.size/8},s.toDisplayString(m.name),9,Ve)],64))),128))])],40,De))}}),je="";P.D3NetworkGraph=Ye,P.useSimulation=ct,Object.defineProperty(P,Symbol.toStringTag,{value:"Module"})});
