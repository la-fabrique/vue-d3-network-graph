(function($,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("vue"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core"],a):($=typeof globalThis<"u"?globalThis:$||self,a($["vue-d3-network-graph"]={},$.Vue,$.VueUseCore))})(this,function($,a,tt){"use strict";function Ft(t,n){const r=a.ref(void 0),e=a.reactive({x:0,y:0}),o=f=>{let g,x=0;return f instanceof MouseEvent?(g=f.clientX,x=f.clientY):f instanceof TouchEvent&&(g=f.touches[0].clientX,x=f.touches[0].clientY),{x:g||0,y:x||0}},s=(f,g)=>n.value?(()=>{r.value=g,c(f,t.value.nodes()[g])})():void 0,c=(f,g)=>{let x=0,d=0;if(f&&g&&(g!=null&&g.x)&&(g!=null&&g.y)){const _=o(f);x=_.x?_.x-g.x:g.x,d=_.y?_.y-g.y:g.y}e.x=x,e.y=d},l=()=>{if(r.value!==void 0){const f=t.value.nodes()[r.value];f.fx=null,f.fy=null,h()}},h=()=>{r.value=void 0,t.value.alpha(.1),t.value.restart(),c()};return{dragStart:s,dragEnd:l,dragMove:f=>{const g=o(f);r.value!=null&&t.value.nodes()[r.value]&&(t.value.restart(),t.value.alpha(.5),t.value.nodes()[r.value].fx=g.x-e.x,t.value.nodes()[r.value].fy=g.y-e.y)}}}const it="arrow-start",at="arrow-end";function Pt(t,n,r){const e=c=>r.value&&c.twoWay?`url(#${it})`:void 0,o=c=>r.value?`url(#${at})`:void 0,s=a.computed(()=>({arrowStart:{id:it,refX:-(n.value/2-t.value),refY:0,viewBox:`0 -${5*t.value} ${10*t.value} ${10*t.value}`,orient:"auto",markerWidth:10+t.value,markerHeight:10+t.value,"stroke-width":"1","marker-units":"userSpaceOnUse"},arrowEnd:{id:at,refX:n.value/2+(10-t.value),refY:0,viewBox:`0 -${5*t.value} ${10*t.value} ${10*t.value}`,orient:"auto",markerWidth:10+t.value,markerHeight:10+t.value,"marker-units":"userSpaceOnUse"}}));return{getMarkerEnd:o,getMarkerStart:e,markers:s}}function It(t){const n=+this._x.call(null,t),r=+this._y.call(null,t);return st(this.cover(n,r),n,r,t)}function st(t,n,r,e){if(isNaN(n)||isNaN(r))return t;var o,s=t._root,c={data:e},l=t._x0,h=t._y0,i=t._x1,f=t._y1,g,x,d,_,y,u,v,p;if(!s)return t._root=c,t;for(;s.length;)if((y=n>=(g=(l+i)/2))?l=g:i=g,(u=r>=(x=(h+f)/2))?h=x:f=x,o=s,!(s=s[v=u<<1|y]))return o[v]=c,t;if(d=+t._x.call(null,s.data),_=+t._y.call(null,s.data),n===d&&r===_)return c.next=s,o?o[v]=c:t._root=c,t;do o=o?o[v]=new Array(4):t._root=new Array(4),(y=n>=(g=(l+i)/2))?l=g:i=g,(u=r>=(x=(h+f)/2))?h=x:f=x;while((v=u<<1|y)===(p=(_>=x)<<1|d>=g));return o[p]=s,o[v]=c,t}function $t(t){var n,r,e=t.length,o,s,c=new Array(e),l=new Array(e),h=1/0,i=1/0,f=-1/0,g=-1/0;for(r=0;r<e;++r)isNaN(o=+this._x.call(null,n=t[r]))||isNaN(s=+this._y.call(null,n))||(c[r]=o,l[r]=s,o<h&&(h=o),o>f&&(f=o),s<i&&(i=s),s>g&&(g=s));if(h>f||i>g)return this;for(this.cover(h,i).cover(f,g),r=0;r<e;++r)st(this,c[r],l[r],t[r]);return this}function Yt(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,e=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,s=(e=Math.floor(n))+1;else{for(var c=o-r||1,l=this._root,h,i;r>t||t>=o||e>n||n>=s;)switch(i=(n<e)<<1|t<r,h=new Array(4),h[i]=l,l=h,c*=2,i){case 0:o=r+c,s=e+c;break;case 1:r=o-c,s=e+c;break;case 2:o=r+c,e=s-c;break;case 3:r=o-c,e=s-c;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=e,this._x1=o,this._y1=s,this}function Xt(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Vt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function L(t,n,r,e,o){this.node=t,this.x0=n,this.y0=r,this.x1=e,this.y1=o}function Wt(t,n,r){var e,o=this._x0,s=this._y0,c,l,h,i,f=this._x1,g=this._y1,x=[],d=this._root,_,y;for(d&&x.push(new L(d,o,s,f,g)),r==null?r=1/0:(o=t-r,s=n-r,f=t+r,g=n+r,r*=r);_=x.pop();)if(!(!(d=_.node)||(c=_.x0)>f||(l=_.y0)>g||(h=_.x1)<o||(i=_.y1)<s))if(d.length){var u=(c+h)/2,v=(l+i)/2;x.push(new L(d[3],u,v,h,i),new L(d[2],c,v,u,i),new L(d[1],u,l,h,v),new L(d[0],c,l,u,v)),(y=(n>=v)<<1|t>=u)&&(_=x[x.length-1],x[x.length-1]=x[x.length-1-y],x[x.length-1-y]=_)}else{var p=t-+this._x.call(null,d.data),k=n-+this._y.call(null,d.data),w=p*p+k*k;if(w<r){var N=Math.sqrt(r=w);o=t-N,s=n-N,f=t+N,g=n+N,e=d.data}}return e}function Ht(t){if(isNaN(f=+this._x.call(null,t))||isNaN(g=+this._y.call(null,t)))return this;var n,r=this._root,e,o,s,c=this._x0,l=this._y0,h=this._x1,i=this._y1,f,g,x,d,_,y,u,v;if(!r)return this;if(r.length)for(;;){if((_=f>=(x=(c+h)/2))?c=x:h=x,(y=g>=(d=(l+i)/2))?l=d:i=d,n=r,!(r=r[u=y<<1|_]))return this;if(!r.length)break;(n[u+1&3]||n[u+2&3]||n[u+3&3])&&(e=n,v=u)}for(;r.data!==t;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):n?(s?n[u]=s:delete n[u],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(e?e[v]=r:this._root=r),this):(this._root=s,this)}function Ut(t){for(var n=0,r=t.length;n<r;++n)this.remove(t[n]);return this}function jt(){return this._root}function Gt(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function Ot(t){var n=[],r,e=this._root,o,s,c,l,h;for(e&&n.push(new L(e,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!t(e=r.node,s=r.x0,c=r.y0,l=r.x1,h=r.y1)&&e.length){var i=(s+l)/2,f=(c+h)/2;(o=e[3])&&n.push(new L(o,i,f,l,h)),(o=e[2])&&n.push(new L(o,s,f,i,h)),(o=e[1])&&n.push(new L(o,i,c,l,f)),(o=e[0])&&n.push(new L(o,s,c,i,f))}return this}function Kt(t){var n=[],r=[],e;for(this._root&&n.push(new L(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var s,c=e.x0,l=e.y0,h=e.x1,i=e.y1,f=(c+h)/2,g=(l+i)/2;(s=o[0])&&n.push(new L(s,c,l,f,g)),(s=o[1])&&n.push(new L(s,f,l,h,g)),(s=o[2])&&n.push(new L(s,c,g,f,i)),(s=o[3])&&n.push(new L(s,f,g,h,i))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function Qt(t){return t[0]}function Zt(t){return arguments.length?(this._x=t,this):this._x}function Jt(t){return t[1]}function qt(t){return arguments.length?(this._y=t,this):this._y}function et(t,n,r){var e=new nt(n??Qt,r??Jt,NaN,NaN,NaN,NaN);return t==null?e:e.addAll(t)}function nt(t,n,r,e,o,s){this._x=t,this._y=n,this._x0=r,this._y0=e,this._x1=o,this._y1=s,this._root=void 0}function lt(t){for(var n={data:t.data},r=n;t=t.next;)r=r.next={data:t.data};return n}var B=et.prototype=nt.prototype;B.copy=function(){var t=new nt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,e;if(!n)return t;if(!n.length)return t._root=lt(n),t;for(r=[{source:n,target:t._root=new Array(4)}];n=r.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?r.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=lt(e));return t},B.add=It,B.addAll=$t,B.cover=Yt,B.data=Xt,B.extent=Vt,B.find=Wt,B.remove=Ht,B.removeAll=Ut,B.root=jt,B.size=Gt,B.visit=Ot,B.visitAfter=Kt,B.x=Zt,B.y=qt;function F(t){return function(){return t}}function Y(t){return(t()-.5)*1e-6}function te(t){return t.x+t.vx}function ee(t){return t.y+t.vy}function ne(t){var n,r,e,o=1,s=1;typeof t!="function"&&(t=F(t==null?1:+t));function c(){for(var i,f=n.length,g,x,d,_,y,u,v=0;v<s;++v)for(g=et(n,te,ee).visitAfter(l),i=0;i<f;++i)x=n[i],y=r[x.index],u=y*y,d=x.x+x.vx,_=x.y+x.vy,g.visit(p);function p(k,w,N,R,T){var E=k.data,C=k.r,S=y+C;if(E){if(E.index>x.index){var P=d-E.x-E.vx,I=_-E.y-E.vy,D=P*P+I*I;D<S*S&&(P===0&&(P=Y(e),D+=P*P),I===0&&(I=Y(e),D+=I*I),D=(S-(D=Math.sqrt(D)))/D*o,x.vx+=(P*=D)*(S=(C*=C)/(u+C)),x.vy+=(I*=D)*S,E.vx-=P*(S=1-S),E.vy-=I*S)}return}return w>d+S||R<d-S||N>_+S||T<_-S}}function l(i){if(i.data)return i.r=r[i.data.index];for(var f=i.r=0;f<4;++f)i[f]&&i[f].r>i.r&&(i.r=i[f].r)}function h(){if(n){var i,f=n.length,g;for(r=new Array(f),i=0;i<f;++i)g=n[i],r[g.index]=+t(g,i,n)}}return c.initialize=function(i,f){n=i,e=f,h()},c.iterations=function(i){return arguments.length?(s=+i,c):s},c.strength=function(i){return arguments.length?(o=+i,c):o},c.radius=function(i){return arguments.length?(t=typeof i=="function"?i:F(+i),h(),c):t},c}function re(t){return t.index}function ct(t,n){var r=t.get(n);if(!r)throw new Error("node not found: "+n);return r}function oe(t){var n=re,r=g,e,o=F(30),s,c,l,h,i,f=1;t==null&&(t=[]);function g(u){return 1/Math.min(l[u.source.index],l[u.target.index])}function x(u){for(var v=0,p=t.length;v<f;++v)for(var k=0,w,N,R,T,E,C,S;k<p;++k)w=t[k],N=w.source,R=w.target,T=R.x+R.vx-N.x-N.vx||Y(i),E=R.y+R.vy-N.y-N.vy||Y(i),C=Math.sqrt(T*T+E*E),C=(C-s[k])/C*u*e[k],T*=C,E*=C,R.vx-=T*(S=h[k]),R.vy-=E*S,N.vx+=T*(S=1-S),N.vy+=E*S}function d(){if(c){var u,v=c.length,p=t.length,k=new Map(c.map((N,R)=>[n(N,R,c),N])),w;for(u=0,l=new Array(v);u<p;++u)w=t[u],w.index=u,typeof w.source!="object"&&(w.source=ct(k,w.source)),typeof w.target!="object"&&(w.target=ct(k,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(u=0,h=new Array(p);u<p;++u)w=t[u],h[u]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);e=new Array(p),_(),s=new Array(p),y()}}function _(){if(c)for(var u=0,v=t.length;u<v;++u)e[u]=+r(t[u],u,t)}function y(){if(c)for(var u=0,v=t.length;u<v;++u)s[u]=+o(t[u],u,t)}return x.initialize=function(u,v){c=u,i=v,d()},x.links=function(u){return arguments.length?(t=u,d(),x):t},x.id=function(u){return arguments.length?(n=u,x):n},x.iterations=function(u){return arguments.length?(f=+u,x):f},x.strength=function(u){return arguments.length?(r=typeof u=="function"?u:F(+u),_(),x):r},x.distance=function(u){return arguments.length?(o=typeof u=="function"?u:F(+u),y(),x):o},x}var ie={value:()=>{}};function ft(){for(var t=0,n=arguments.length,r={},e;t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new O(r)}function O(t){this._=t}function ae(t,n){return t.trim().split(/^|\s+/).map(function(r){var e="",o=r.indexOf(".");if(o>=0&&(e=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:e}})}O.prototype=ft.prototype={constructor:O,on:function(t,n){var r=this._,e=ae(t+"",r),o,s=-1,c=e.length;if(arguments.length<2){for(;++s<c;)if((o=(t=e[s]).type)&&(o=se(r[o],t.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++s<c;)if(o=(t=e[s]).type)r[o]=ut(r[o],t.name,n);else if(n==null)for(o in r)r[o]=ut(r[o],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new O(t)},call:function(t,n){if((o=arguments.length-2)>0)for(var r=new Array(o),e=0,o,s;e<o;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],e=0,o=s.length;e<o;++e)s[e].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var e=this._[t],o=0,s=e.length;o<s;++o)e[o].value.apply(n,r)}};function se(t,n){for(var r=0,e=t.length,o;r<e;++r)if((o=t[r]).name===n)return o.value}function ut(t,n,r){for(var e=0,o=t.length;e<o;++e)if(t[e].name===n){t[e]=ie,t=t.slice(0,e).concat(t.slice(e+1));break}return r!=null&&t.push({name:n,value:r}),t}var V=0,H=0,U=0,ht=1e3,K,j,Q=0,X=0,Z=0,G=typeof performance=="object"&&performance.now?performance:Date,gt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yt(){return X||(gt(le),X=G.now()+Z)}function le(){X=0}function rt(){this._call=this._time=this._next=null}rt.prototype=dt.prototype={constructor:rt,restart:function(t,n,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?yt():+r)+(n==null?0:+n),!this._next&&j!==this&&(j?j._next=this:K=this,j=this),this._call=t,this._time=r,ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,ot())}};function dt(t,n,r){var e=new rt;return e.restart(t,n,r),e}function ce(){yt(),++V;for(var t=K,n;t;)(n=X-t._time)>=0&&t._call.call(void 0,n),t=t._next;--V}function vt(){X=(Q=G.now())+Z,V=H=0;try{ce()}finally{V=0,ue(),X=0}}function fe(){var t=G.now(),n=t-Q;n>ht&&(Z-=n,Q=t)}function ue(){for(var t,n=K,r,e=1/0;n;)n._call?(e>n._time&&(e=n._time),t=n,n=n._next):(r=n._next,n._next=null,n=t?t._next=r:K=r);j=t,ot(e)}function ot(t){if(!V){H&&(H=clearTimeout(H));var n=t-X;n>24?(t<1/0&&(H=setTimeout(vt,t-G.now()-Z)),U&&(U=clearInterval(U))):(U||(Q=G.now(),U=setInterval(fe,ht)),V=1,gt(vt))}}const he=1664525,ge=1013904223,xt=4294967296;function ye(){let t=1;return()=>(t=(he*t+ge)%xt)/xt}function de(t){return t.x}function ve(t){return t.y}var xe=10,_e=Math.PI*(3-Math.sqrt(5));function _t(t){var n,r=1,e=.001,o=1-Math.pow(e,1/300),s=0,c=.6,l=new Map,h=dt(g),i=ft("tick","end"),f=ye();t==null&&(t=[]);function g(){x(),i.call("tick",n),r<e&&(h.stop(),i.call("end",n))}function x(y){var u,v=t.length,p;y===void 0&&(y=1);for(var k=0;k<y;++k)for(r+=(s-r)*o,l.forEach(function(w){w(r)}),u=0;u<v;++u)p=t[u],p.fx==null?p.x+=p.vx*=c:(p.x=p.fx,p.vx=0),p.fy==null?p.y+=p.vy*=c:(p.y=p.fy,p.vy=0);return n}function d(){for(var y=0,u=t.length,v;y<u;++y){if(v=t[y],v.index=y,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var p=xe*Math.sqrt(.5+y),k=y*_e;v.x=p*Math.cos(k),v.y=p*Math.sin(k)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function _(y){return y.initialize&&y.initialize(t,f),y}return d(),n={tick:x,restart:function(){return h.restart(g),n},stop:function(){return h.stop(),n},nodes:function(y){return arguments.length?(t=y,d(),l.forEach(_),n):t},alpha:function(y){return arguments.length?(r=+y,n):r},alphaMin:function(y){return arguments.length?(e=+y,n):e},alphaDecay:function(y){return arguments.length?(o=+y,n):+o},alphaTarget:function(y){return arguments.length?(s=+y,n):s},velocityDecay:function(y){return arguments.length?(c=1-y,n):1-c},randomSource:function(y){return arguments.length?(f=y,l.forEach(_),n):f},force:function(y,u){return arguments.length>1?(u==null?l.delete(y):l.set(y,_(u)),n):l.get(y)},find:function(y,u,v){var p=0,k=t.length,w,N,R,T,E;for(v==null?v=1/0:v*=v,p=0;p<k;++p)T=t[p],w=y-T.x,N=u-T.y,R=w*w+N*N,R<v&&(E=T,v=R);return E},on:function(y,u){return arguments.length>1?(i.on(y,u),n):i.on(y)}}}function pe(){var t,n,r,e,o=F(-30),s,c=1,l=1/0,h=.81;function i(d){var _,y=t.length,u=et(t,de,ve).visitAfter(g);for(e=d,_=0;_<y;++_)n=t[_],u.visit(x)}function f(){if(t){var d,_=t.length,y;for(s=new Array(_),d=0;d<_;++d)y=t[d],s[y.index]=+o(y,d,t)}}function g(d){var _=0,y,u,v=0,p,k,w;if(d.length){for(p=k=w=0;w<4;++w)(y=d[w])&&(u=Math.abs(y.value))&&(_+=y.value,v+=u,p+=u*y.x,k+=u*y.y);d.x=p/v,d.y=k/v}else{y=d,y.x=y.data.x,y.y=y.data.y;do _+=s[y.data.index];while(y=y.next)}d.value=_}function x(d,_,y,u){if(!d.value)return!0;var v=d.x-n.x,p=d.y-n.y,k=u-_,w=v*v+p*p;if(k*k/h<w)return w<l&&(v===0&&(v=Y(r),w+=v*v),p===0&&(p=Y(r),w+=p*p),w<c&&(w=Math.sqrt(c*w)),n.vx+=v*d.value*e/w,n.vy+=p*d.value*e/w),!0;if(d.length||w>=l)return;(d.data!==n||d.next)&&(v===0&&(v=Y(r),w+=v*v),p===0&&(p=Y(r),w+=p*p),w<c&&(w=Math.sqrt(c*w)));do d.data!==n&&(k=s[d.data.index]*e/w,n.vx+=v*k,n.vy+=p*k);while(d=d.next)}return i.initialize=function(d,_){t=d,r=_,f()},i.strength=function(d){return arguments.length?(o=typeof d=="function"?d:F(+d),f(),i):o},i.distanceMin=function(d){return arguments.length?(c=d*d,i):Math.sqrt(c)},i.distanceMax=function(d){return arguments.length?(l=d*d,i):Math.sqrt(l)},i.theta=function(d){return arguments.length?(h=d*d,i):Math.sqrt(h)},i}function we(t){var n=F(.1),r,e,o;typeof t!="function"&&(t=F(t==null?0:+t));function s(l){for(var h=0,i=r.length,f;h<i;++h)f=r[h],f.vx+=(o[h]-f.x)*e[h]*l}function c(){if(r){var l,h=r.length;for(e=new Array(h),o=new Array(h),l=0;l<h;++l)e[l]=isNaN(o[l]=+t(r[l],l,r))?0:+n(r[l],l,r)}}return s.initialize=function(l){r=l,c()},s.strength=function(l){return arguments.length?(n=typeof l=="function"?l:F(+l),c(),s):n},s.x=function(l){return arguments.length?(t=typeof l=="function"?l:F(+l),c(),s):t},s}function me(t){var n=F(.1),r,e,o;typeof t!="function"&&(t=F(t==null?0:+t));function s(l){for(var h=0,i=r.length,f;h<i;++h)f=r[h],f.vy+=(o[h]-f.y)*e[h]*l}function c(){if(r){var l,h=r.length;for(e=new Array(h),o=new Array(h),l=0;l<h;++l)e[l]=isNaN(o[l]=+t(r[l],l,r))?0:+n(r[l],l,r)}}return s.initialize=function(l){r=l,c()},s.strength=function(l){return arguments.length?(n=typeof l=="function"?l:F(+l),c(),s):n},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:F(+l),c(),s):t},s}function ke(t){const n=i=>i||t.value,r=i=>i.width||t.value,e=i=>i.height||i.size||t.value,o=i=>i.color?"fill: "+i.color:"",s=(i,f)=>i||f?["node","pinned"]:["node"];return{getNode:(i,f,g)=>({id:i.id,key:i.id,x:f,y:g,viewBox:i.innerSVG,width:r(i),height:e(i),name:i.name,style:o(i),title:i.name,cssClass:s(),r:i.innerSVG?void 0:n(i.size)/2}),getClass:s,getSize:n,getX:(i,f)=>(i||0)-(f||0)/2,getY:(i,f)=>(i||0)-(f||0)/2}}const Me="arrow-start",Ne="arrow-end";function Ee(t,n,r){const e=h=>h.color?{stroke:h.color}:void 0,o=h=>["link"],s=h=>r.value&&h.twoWay?`url(#${Me})`:void 0,c=h=>r.value?`url(#${Ne})`:void 0;return{getClass:o,getStyle:e,getMarkerEnd:c,getMarkerStart:s,getSimulationLink:h=>({source:h.source,target:h.target,name:h.name,class:o(h.id),style:e(h),"stroke-width":t.value,"marker-end":c(),"marker-start":s(h)})}}const Se="X",Ae="Y",Re="charge",Te="link",be="collide",pt=.01,wt=.1,ze=Math.log(pt)/Math.log(1-wt);function mt(t,n,r,e){const{getNode:o}=ke(e.nodeSize),{getSimulationLink:s}=Ee(e.linkWidth,e.nodeSize,e.directed),c=a.reactive({nodes:[],links:[]}),l=()=>{c.nodes=t.value.map(g=>o(g)),c.links=n.value.map(g=>s(g)),h()},h=async()=>{f.value.stop(),f.value=i(),e.static.value?f.value.tick(ze):f.value.restart()},i=()=>{const g=_t().alphaMin(pt).alphaDecay(wt).nodes(c.nodes);return g.force(Se,we(r.value.width/2).strength(e.forceXStrength.value)),g.force(Ae,me(r.value.height/2).strength(e.forceYStrength.value)),g.force(Re,pe().strength(e.forcManyBodyStrength.value)),g.force(be,ne(e.forceCollideStrength.value)),g.force(Te,oe(c.links).id(x=>{if(!("id"in x))throw new Error("Node id is undefined");return x.id})),g},f=a.ref(_t());return tt.watchDebounced([()=>t.value.length,()=>n.value.length,r,e.nodeSize,e.linkWidth,e.forcManyBodyStrength,e.forceXStrength,e.forceYStrength,e.forceCollideStrength,e.directed],async()=>l(),{debounce:100,maxWait:1e3}),tt.watchDebounced(e.static,async()=>h(),{deep:!0,debounce:100,maxWait:1e3}),{simulation:f,graph:c}}const Ce=.1,De=.1,Le=-300,Be=25,Fe=12,Pe=2,Ie=45,$e=t=>{const n=a.computed(()=>{var e,o,s,c,l,h,i,f,g,x,d,_,y,u,v,p,k,w,N,R,T,E,C,S,P,I,D,J,q,M,z,m,b,A,kt,Mt,Nt,Et,St,At,Rt,Tt,bt,zt,Ct,Dt,Lt,Bt;return{node:{stroke:((s=(o=(e=t.value)==null?void 0:e.nodes)==null?void 0:o.colors)==null?void 0:s.stroke)||"#E2EB98",fill:((h=(l=(c=t.value)==null?void 0:c.nodes)==null?void 0:l.colors)==null?void 0:h.fill)||"#93A392",selected:{stroke:((x=(g=(f=(i=t.value)==null?void 0:i.nodes)==null?void 0:f.colors)==null?void 0:g.selected)==null?void 0:x.stroke)||"#9DC4B5",fill:(u=(y=(_=(d=t.value)==null?void 0:d.nodes)==null?void 0:_.colors)==null?void 0:y.selected)==null?void 0:u.fill},hover:{stroke:"#9DC4B5",fill:(w=(k=(p=(v=t.value)==null?void 0:v.nodes)==null?void 0:p.colors)==null?void 0:k.hover)==null?void 0:w.fill},pinned:{stroke:"#9DC4B5",fill:(E=(T=(R=(N=t.value)==null?void 0:N.nodes)==null?void 0:R.colors)==null?void 0:T.pinned)==null?void 0:E.fill},label:{fill:((I=(P=(S=(C=t.value)==null?void 0:C.nodes)==null?void 0:S.colors)==null?void 0:P.label)==null?void 0:I.fill)||"#93A392"}},link:{stroke:((q=(J=(D=t.value)==null?void 0:D.links)==null?void 0:J.colors)==null?void 0:q.stroke)||"#BAD9A2",fill:(m=(z=(M=t.value)==null?void 0:M.links)==null?void 0:z.colors)==null?void 0:m.fill,selected:{stroke:((Mt=(kt=(A=(b=t.value)==null?void 0:b.links)==null?void 0:A.colors)==null?void 0:kt.selected)==null?void 0:Mt.stroke)||"#9DC4B5",fill:(At=(St=(Et=(Nt=t.value)==null?void 0:Nt.links)==null?void 0:Et.colors)==null?void 0:St.selected)==null?void 0:At.fill},hover:{stroke:"#9DC4B5",fill:(zt=(bt=(Tt=(Rt=t.value)==null?void 0:Rt.links)==null?void 0:Tt.colors)==null?void 0:bt.hover)==null?void 0:zt.fill},label:{fill:((Bt=(Lt=(Dt=(Ct=t.value)==null?void 0:Ct.links)==null?void 0:Dt.colors)==null?void 0:Lt.label)==null?void 0:Bt.fill)||"#93A392"}}}});return{options:{static:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.simulation)==null?void 0:o.static)||!1}),forceXStrength:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.simulation)==null?void 0:o.force.x)||Ce}),forceYStrength:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.simulation)==null?void 0:o.force.y)||De}),forcManyBodyStrength:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.simulation)==null?void 0:o.force.charge)||Le}),forceCollideStrength:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.simulation)==null?void 0:o.force.collide)||Ie}),nodeSize:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.nodes)==null?void 0:o.size)||Be}),nodeFontSize:a.toRef(()=>{var e,o,s;return((s=(o=(e=t.value)==null?void 0:e.nodes)==null?void 0:o.font)==null?void 0:s.size)||Fe}),linkWidth:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.links)==null?void 0:o.width)||Pe}),linkFontSize:a.toRef(()=>{var e,o,s;return((s=(o=(e=t.value)==null?void 0:e.links)==null?void 0:o.font)==null?void 0:s.size)||12}),draggables:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.layout)==null?void 0:o.draggables)||!1}),directed:a.toRef(()=>{var e,o;return((o=(e=t.value)==null?void 0:e.layout)==null?void 0:o.directed)||!1})},theme:n}},Ye=(t,n)=>({label:a.computed(()=>({font:{size:t.value},offset:{x:n.value/2+t.value/2,y:t.value/2}}))}),W=t=>!!t&&typeof t!="number"&&typeof t!="string",Xe=t=>({label:a.computed(()=>({font:{size:t.value}})),getX:o=>W(o.source)&&W(o.target)&&o.source.x&&o.target.x?o.target.x>o.source.x?o.source.x+(o.target.x-o.source.x)/2:o.target.x+(o.source.x-o.target.x)/2:void 0,getY:o=>W(o.source)&&W(o.target)&&o.source.y&&o.target.y?o.target.y>o.source.y?o.source.y+(o.target.y-o.source.y)/2:o.target.y+(o.source.y-o.target.y)/2:void 0}),Ve=t=>{const n=a.ref({Sx:1,Qx:0,Qy:0,Sy:1,Tx:0,Ty:0}),r=a.computed(()=>`matrix(${n.value.Sx},${n.value.Qx},${n.value.Qy},${n.value.Sy},${n.value.Tx},${n.value.Ty})`),e={x:0,y:0},o=g=>g>=.5&&g<=4,s=()=>e.x!==0&&e.y!==0,c=(g,x,d,_)=>({x:g-_,y:x-d});return{transform:r,zoom:(g,x,d)=>{const _=n.value.Sx+d;if(!o(_))return;const y=c(g,x,t.value.top,t.value.left);n.value.Tx=_/n.value.Sx*(n.value.Tx-y.x)+y.x,n.value.Ty=_/n.value.Sx*(n.value.Ty-y.y)+y.y,n.value.Sx=_,n.value.Sy=_},panMove:(g,x)=>{if(!s())return;const d=g-e.x,_=x-e.y;n.value.Tx+=d,n.value.Ty+=_,e.x=g,e.y=x},panStart:(g,x)=>{e.x=g,e.y=x},panEnd:()=>{e.x=0,e.y=0}}},We=["viewBox","onMousedown","onWheel"],He={key:0},Ue=["fill"],je=["fill"],Ge=["transform"],Oe={class:"links"},Ke=["id","d","stroke-width","marker-end","marker-start","onClick","onTouchstartPassive"],Qe=["font-size","x","y"],Ze={id:"l-nodes",class:"nodes"},Je=["viewBox","width","height","x","y","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive","innerHTML"],qe=["cx","cy","r","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive"],tn=["x","y","font-size"],en=a.defineComponent({__name:"D3NetworkGraph",props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0},options:{type:Object,default:void 0}},emits:["node-click","link-click"],setup(t,{emit:n}){const r=t;a.useCssVars(M=>({"1a59dbe0":a.unref(e).node.stroke,"553cb5aa":a.unref(e).node.fill,"1450be1c":a.unref(e).node.selected.stroke||a.unref(e).node.stroke,"19dfd67c":a.unref(e).node.selected.fill||a.unref(e).node.fill,"189ac84e":a.unref(e).node.pinned.stroke||a.unref(e).node.stroke,"5ba81ab9":a.unref(e).node.pinned.fill||a.unref(e).node.fill,f47aea26:a.unref(e).node.hover.stroke||a.unref(e).node.stroke,f4da9866:a.unref(e).node.hover.fill||a.unref(e).node.fill,"70cb32e8":a.unref(e).link.stroke,"58cd1e33":a.unref(e).link.fill,"32e8c38a":a.unref(e).link.selected.stroke,"6f737b74":a.unref(e).link.selected.fill,"7fa43ed2":a.unref(e).node.hover.stroke,d927c6c6:a.unref(e).node.hover.fill,bd446626:a.unref(e).link.label.fill,"20ff39e5":a.unref(e).node.label.fill}));const{theme:e,options:o}=$e(a.toRef(()=>r.options)),s=a.ref(null),c=a.ref(null),l=a.ref({width:100,height:100,top:0,left:0}),{transform:h,zoom:i,panMove:f,panStart:g,panEnd:x}=Ve(l);tt.useResizeObserver(s,M=>{const z=M[0];if(z.contentRect.width===l.value.width&&z.contentRect.height===l.value.height)return;const m=z.target.getBoundingClientRect();l.value={top:m.top,left:m.left,width:z.contentRect.width,height:z.contentRect.height}});const d=M=>W(M.source)&&W(M.target)?`M${M.source.x} ${M.source.y} L${M.target.x} ${M.target.y}`:void 0,{simulation:_,graph:y}=mt(a.toRef(()=>r.nodes),a.toRef(()=>r.links),l,o),{dragStart:u,dragEnd:v,dragMove:p}=Ft(_,o.draggables),{label:k}=Ye(o.nodeFontSize,o.nodeSize),{label:w,getX:N,getY:R}=Xe(o.linkFontSize),{markers:T}=Pt(o.linkWidth,o.nodeSize,o.directed),E=(M,z,m)=>{n("node-click",M,r.nodes[m])},C=(M,z,m)=>{n("link-click",M,r.links[m])},S=async M=>{if(!M.ctrlKey||!c.value)return;const z=M.deltaY||M.deltaX,m=Math.abs(z)<50?.05:.25,b=z<0?m:-m;i(M.clientX,M.clientY,b)},P=M=>{p(M),f(M.clientX,M.clientY)},I=M=>{g(M.clientX,M.clientY)},D=(M,z)=>u(M,z),J=()=>{v(),x()},q=()=>v();return(M,z)=>(a.openBlock(),a.createElementBlock("svg",{ref_key:"svg",ref:s,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin",viewBox:`0 0 ${l.value.width} ${l.value.height}`,class:"svg-container",onMousedown:a.withModifiers(I,["self","prevent"]),onMouseup:J,onTouchendPassive:q,onTouchstartPassive:z[0]||(z[0]=async()=>{}),onMousemove:P,onWheel:a.withModifiers(S,["prevent"])},[a.unref(o).directed?(a.openBlock(),a.createElementBlock("defs",He,[a.createElementVNode("marker",a.normalizeProps(a.guardReactiveProps(a.unref(T).arrowEnd)),[a.createElementVNode("path",{fill:a.unref(e).link.stroke,d:"M0 -5 L 10 0 L 0 5"},null,8,Ue)],16),a.createElementVNode("marker",a.normalizeProps(a.guardReactiveProps(a.unref(T).arrowStart)),[a.createElementVNode("path",{fill:a.unref(e).link.stroke,d:"M 10 5 L 0 0 L 10 -5"},null,8,je)],16)])):a.createCommentVNode("",!0),a.createElementVNode("g",{ref_key:"canvas",ref:c,class:"svg-canvas",transform:a.unref(h)},[a.createElementVNode("g",Oe,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(a.unref(y).links,(m,b)=>(a.openBlock(),a.createElementBlock(a.Fragment,{key:b},[a.createElementVNode("path",{id:`${b}`,d:d(m),"stroke-width":m["stroke-width"],class:a.normalizeClass(m.class),style:a.normalizeStyle(m.style),"marker-end":m["marker-end"],"marker-start":m["marker-start"],onClick:A=>C(A,m,b),onTouchstartPassive:A=>C(A,m,b)},null,46,Ke),a.createElementVNode("text",{class:"link-label","font-size":a.unref(w).font.size,x:a.unref(N)(m),y:a.unref(R)(m)},a.toDisplayString(m.name),9,Qe)],64))),128))]),a.createElementVNode("g",Ze,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(a.unref(y).nodes,(m,b)=>(a.openBlock(),a.createElementBlock(a.Fragment,{key:b},[m.innerSVG?(a.openBlock(),a.createElementBlock("svg",{key:0,viewBox:m.innerSVG.viewBox,width:m.width,height:m.height,x:(m.x||0)-(m.width||0)/2,y:(m.y||0)-(m.height||0)/2,style:a.normalizeStyle(m.style),title:m.name,class:a.normalizeClass(m.cssClass),onClick:A=>E(A,m,b),onTouchendPassive:A=>E(A,m,b),onMousedown:a.withModifiers(A=>D(A,b),["prevent"]),onTouchstartPassive:a.withModifiers(A=>D(A,b),["prevent"]),innerHTML:m.innerSVG.innerHtml},null,46,Je)):(a.openBlock(),a.createElementBlock("circle",{key:1,cx:m.x,cy:m.y,r:m.r,style:a.normalizeStyle(m.style),title:m.name,class:a.normalizeClass(m.cssClass),onClick:A=>E(A,m,b),onTouchendPassive:A=>E(A,m,b),onMousedown:a.withModifiers(A=>D(A,b),["prevent"]),onTouchstartPassive:a.withModifiers(A=>D(A,b),["prevent"])},null,46,qe)),a.createElementVNode("text",{class:"node-label",x:(m.x||0)+(m.width||0)/2+a.unref(k).font.size/2,y:(m.y||0)+a.unref(k).offset.y,"font-size":a.unref(k).font.size},a.toDisplayString(m.name),9,tn)],64))),128))])],8,Ge)],40,We))}}),nn="";$.D3NetworkGraph=en,$.useSimulation=mt,Object.defineProperty($,Symbol.toStringTag,{value:"Module"})});
