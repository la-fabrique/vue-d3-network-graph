(function(S,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core"],l):(S=typeof globalThis<"u"?globalThis:S||self,l(S["vue-d3-network-graph"]={},S.Vue,S.VueUseCore))})(this,function(S,l,G){"use strict";function Pt(t,n){const e=l.ref(void 0),r=l.reactive({x:0,y:0}),s=u=>{let w,_=0;return u instanceof MouseEvent?(w=u.clientX,_=u.clientY):u instanceof TouchEvent&&(w=u.touches[0].clientX,_=u.touches[0].clientY),{x:w||0,y:_||0}},i=(u,w)=>l.toValue(n)?(()=>{e.value=w,a(u,t.value.nodes()[w])})():void 0,a=(u,w)=>{let _=0,h=0;if(u&&w&&(w!=null&&w.x)&&(w!=null&&w.y)){const m=s(u);_=m.x?m.x-w.x:w.x,h=m.y?m.y-w.y:w.y}r.x=_,r.y=h},o=()=>{if(e.value!==void 0){const u=t.value.nodes()[e.value];u.fx=null,u.fy=null,c()}},c=()=>{e.value=void 0,t.value.alpha(.1),t.value.restart(),a()};return{dragStart:i,dragEnd:o,move:u=>{const w=s(u);e.value!=null&&t.value.nodes()[e.value]&&(t.value.restart(),t.value.alpha(.5),t.value.nodes()[e.value].fx=w.x-r.x,t.value.nodes()[e.value].fy=w.y-r.y)}}}function Ft(t){const n=o=>o.size||t.value.size,e=o=>o.width||t.value.size,r=o=>o.height||o.size||t.value.size,s=o=>o.color?"fill: "+o.color:"",i=(o,c=[])=>{const d=o.cssClass?o.cssClass:[];return d.push("node"),c.forEach(u=>d.push(u)),(o.fx||o.fy)&&d.push("pinned"),d};return{label:l.computed(()=>({font:{size:t.value.font.size},offset:{x:t.value.size/2+t.value.font.size/2,y:t.value.font.size/2}})),getSize:n,getWidth:e,getHeight:r,getStyle:s,getClass:i}}function Lt(t){return{getPath:i=>{var a,o,c,d;if(typeof i.source!="number"&&typeof i.source!="string"&&typeof i.target!="number"&&typeof i.target!="string"){const u={M:[((a=i==null?void 0:i.source)==null?void 0:a.x)||0,((o=i==null?void 0:i.source)==null?void 0:o.y)||0],X:[((c=i==null?void 0:i.target)==null?void 0:c.x)||0,((d=i==null?void 0:i.target)==null?void 0:d.y)||0]};return"M "+u.M.join(" ")+" L"+u.X.join(" ")}},getAttrs:i=>({"stroke-width":t.value.width}),getClass:i=>["link"],getStyle:i=>i.color?{stroke:i.color}:{}}}function Ot(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return $(this.cover(n,e),n,e,t)}function $(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var s,i=t._root,a={data:r},o=t._x0,c=t._y0,d=t._x1,u=t._y1,w,_,h,m,g,f,y,x;if(!i)return t._root=a,t;for(;i.length;)if((g=n>=(w=(o+d)/2))?o=w:d=w,(f=e>=(_=(c+u)/2))?c=_:u=_,s=i,!(i=i[y=f<<1|g]))return s[y]=a,t;if(h=+t._x.call(null,i.data),m=+t._y.call(null,i.data),n===h&&e===m)return a.next=i,s?s[y]=a:t._root=a,t;do s=s?s[y]=new Array(4):t._root=new Array(4),(g=n>=(w=(o+d)/2))?o=w:d=w,(f=e>=(_=(c+u)/2))?c=_:u=_;while((y=f<<1|g)===(x=(m>=_)<<1|h>=w));return s[x]=i,s[y]=a,t}function It(t){var n,e,r=t.length,s,i,a=new Array(r),o=new Array(r),c=1/0,d=1/0,u=-1/0,w=-1/0;for(e=0;e<r;++e)isNaN(s=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=s,o[e]=i,s<c&&(c=s),s>u&&(u=s),i<d&&(d=i),i>w&&(w=i));if(c>u||d>w)return this;for(this.cover(c,d).cover(u,w),e=0;e<r;++e)$(this,a[e],o[e],t[e]);return this}function Rt(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,s=this._x1,i=this._y1;if(isNaN(e))s=(e=Math.floor(t))+1,i=(r=Math.floor(n))+1;else{for(var a=s-e||1,o=this._root,c,d;e>t||t>=s||r>n||n>=i;)switch(d=(n<r)<<1|t<e,c=new Array(4),c[d]=o,o=c,a*=2,d){case 0:s=e+a,i=r+a;break;case 1:e=s-a,i=r+a;break;case 2:s=e+a,r=i-a;break;case 3:e=s-a,r=i-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._y0=r,this._x1=s,this._y1=i,this}function jt(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function Ht(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function C(t,n,e,r,s){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=s}function Vt(t,n,e){var r,s=this._x0,i=this._y0,a,o,c,d,u=this._x1,w=this._y1,_=[],h=this._root,m,g;for(h&&_.push(new C(h,s,i,u,w)),e==null?e=1/0:(s=t-e,i=n-e,u=t+e,w=n+e,e*=e);m=_.pop();)if(!(!(h=m.node)||(a=m.x0)>u||(o=m.y0)>w||(c=m.x1)<s||(d=m.y1)<i))if(h.length){var f=(a+c)/2,y=(o+d)/2;_.push(new C(h[3],f,y,c,d),new C(h[2],a,y,f,d),new C(h[1],f,o,c,y),new C(h[0],a,o,f,y)),(g=(n>=y)<<1|t>=f)&&(m=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=m)}else{var x=t-+this._x.call(null,h.data),k=n-+this._y.call(null,h.data),p=x*x+k*k;if(p<e){var N=Math.sqrt(e=p);s=t-N,i=n-N,u=t+N,w=n+N,r=h.data}}return r}function Yt(t){if(isNaN(u=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var n,e=this._root,r,s,i,a=this._x0,o=this._y0,c=this._x1,d=this._y1,u,w,_,h,m,g,f,y;if(!e)return this;if(e.length)for(;;){if((m=u>=(_=(a+c)/2))?a=_:c=_,(g=w>=(h=(o+d)/2))?o=h:d=h,n=e,!(e=e[f=g<<1|m]))return this;if(!e.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(r=n,y=f)}for(;e.data!==t;)if(s=e,!(e=e.next))return this;return(i=e.next)&&delete e.next,s?(i?s.next=i:delete s.next,this):n?(i?n[f]=i:delete n[f],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[y]=e:this._root=e),this):(this._root=i,this)}function Xt(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function Gt(){return this._root}function Ut(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function qt(t){var n=[],e,r=this._root,s,i,a,o,c;for(r&&n.push(new C(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,i=e.x0,a=e.y0,o=e.x1,c=e.y1)&&r.length){var d=(i+o)/2,u=(a+c)/2;(s=r[3])&&n.push(new C(s,d,u,o,c)),(s=r[2])&&n.push(new C(s,i,u,d,c)),(s=r[1])&&n.push(new C(s,d,a,o,u)),(s=r[0])&&n.push(new C(s,i,a,d,u))}return this}function Wt(t){var n=[],e=[],r;for(this._root&&n.push(new C(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var s=r.node;if(s.length){var i,a=r.x0,o=r.y0,c=r.x1,d=r.y1,u=(a+c)/2,w=(o+d)/2;(i=s[0])&&n.push(new C(i,a,o,u,w)),(i=s[1])&&n.push(new C(i,u,o,c,w)),(i=s[2])&&n.push(new C(i,a,w,u,d)),(i=s[3])&&n.push(new C(i,u,w,c,d))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function $t(t){return t[0]}function Kt(t){return arguments.length?(this._x=t,this):this._x}function Qt(t){return t[1]}function Zt(t){return arguments.length?(this._y=t,this):this._y}function K(t,n,e){var r=new U(n??$t,e??Qt,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function U(t,n,e,r,s,i){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=s,this._y1=i,this._root=void 0}function Q(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var b=K.prototype=U.prototype;b.copy=function(){var t=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Q(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var s=0;s<4;++s)(r=n.source[s])&&(r.length?e.push({source:r,target:n.target[s]=new Array(4)}):n.target[s]=Q(r));return t},b.add=Ot,b.addAll=It,b.cover=Rt,b.data=jt,b.extent=Ht,b.find=Vt,b.remove=Yt,b.removeAll=Xt,b.root=Gt,b.size=Ut,b.visit=qt,b.visitAfter=Wt,b.x=Kt,b.y=Zt;function B(t){return function(){return t}}function F(t){return(t()-.5)*1e-6}function Jt(t){return t.index}function Z(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function te(t){var n=Jt,e=w,r,s=B(30),i,a,o,c,d,u=1;t==null&&(t=[]);function w(f){return 1/Math.min(o[f.source.index],o[f.target.index])}function _(f){for(var y=0,x=t.length;y<u;++y)for(var k=0,p,N,M,T,E,A,v;k<x;++k)p=t[k],N=p.source,M=p.target,T=M.x+M.vx-N.x-N.vx||F(d),E=M.y+M.vy-N.y-N.vy||F(d),A=Math.sqrt(T*T+E*E),A=(A-i[k])/A*f*r[k],T*=A,E*=A,M.vx-=T*(v=c[k]),M.vy-=E*v,N.vx+=T*(v=1-v),N.vy+=E*v}function h(){if(a){var f,y=a.length,x=t.length,k=new Map(a.map((N,M)=>[n(N,M,a),N])),p;for(f=0,o=new Array(y);f<x;++f)p=t[f],p.index=f,typeof p.source!="object"&&(p.source=Z(k,p.source)),typeof p.target!="object"&&(p.target=Z(k,p.target)),o[p.source.index]=(o[p.source.index]||0)+1,o[p.target.index]=(o[p.target.index]||0)+1;for(f=0,c=new Array(x);f<x;++f)p=t[f],c[f]=o[p.source.index]/(o[p.source.index]+o[p.target.index]);r=new Array(x),m(),i=new Array(x),g()}}function m(){if(a)for(var f=0,y=t.length;f<y;++f)r[f]=+e(t[f],f,t)}function g(){if(a)for(var f=0,y=t.length;f<y;++f)i[f]=+s(t[f],f,t)}return _.initialize=function(f,y){a=f,d=y,h()},_.links=function(f){return arguments.length?(t=f,h(),_):t},_.id=function(f){return arguments.length?(n=f,_):n},_.iterations=function(f){return arguments.length?(u=+f,_):u},_.strength=function(f){return arguments.length?(e=typeof f=="function"?f:B(+f),m(),_):e},_.distance=function(f){return arguments.length?(s=typeof f=="function"?f:B(+f),g(),_):s},_}var ee={value:()=>{}};function J(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new H(e)}function H(t){this._=t}function ne(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",s=e.indexOf(".");if(s>=0&&(r=e.slice(s+1),e=e.slice(0,s)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}H.prototype=J.prototype={constructor:H,on:function(t,n){var e=this._,r=ne(t+"",e),s,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((s=(t=r[i]).type)&&(s=re(e[s],t.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<a;)if(s=(t=r[i]).type)e[s]=tt(e[s],t.name,n);else if(n==null)for(s in e)e[s]=tt(e[s],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new H(t)},call:function(t,n){if((s=arguments.length-2)>0)for(var e=new Array(s),r=0,s,i;r<s;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,i=r.length;s<i;++s)r[s].value.apply(n,e)}};function re(t,n){for(var e=0,r=t.length,s;e<r;++e)if((s=t[e]).name===n)return s.value}function tt(t,n,e){for(var r=0,s=t.length;r<s;++r)if(t[r].name===n){t[r]=ee,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var L=0,O=0,I=0,et=1e3,V,R,Y=0,P=0,X=0,j=typeof performance=="object"&&performance.now?performance:Date,nt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rt(){return P||(nt(ie),P=j.now()+X)}function ie(){P=0}function q(){this._call=this._time=this._next=null}q.prototype=it.prototype={constructor:q,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?rt():+e)+(n==null?0:+n),!this._next&&R!==this&&(R?R._next=this:V=this,R=this),this._call=t,this._time=e,W()},stop:function(){this._call&&(this._call=null,this._time=1/0,W())}};function it(t,n,e){var r=new q;return r.restart(t,n,e),r}function oe(){rt(),++L;for(var t=V,n;t;)(n=P-t._time)>=0&&t._call.call(void 0,n),t=t._next;--L}function ot(){P=(Y=j.now())+X,L=O=0;try{oe()}finally{L=0,le(),P=0}}function se(){var t=j.now(),n=t-Y;n>et&&(X-=n,Y=t)}function le(){for(var t,n=V,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:V=e);R=t,W(r)}function W(t){if(!L){O&&(O=clearTimeout(O));var n=t-P;n>24?(t<1/0&&(O=setTimeout(ot,t-j.now()-X)),I&&(I=clearInterval(I))):(I||(Y=j.now(),I=setInterval(se,et)),L=1,nt(ot))}}const ae=1664525,fe=1013904223,st=4294967296;function ce(){let t=1;return()=>(t=(ae*t+fe)%st)/st}function ue(t){return t.x}function he(t){return t.y}var ge=10,ye=Math.PI*(3-Math.sqrt(5));function de(t){var n,e=1,r=.001,s=1-Math.pow(r,1/300),i=0,a=.6,o=new Map,c=it(w),d=J("tick","end"),u=ce();t==null&&(t=[]);function w(){_(),d.call("tick",n),e<r&&(c.stop(),d.call("end",n))}function _(g){var f,y=t.length,x;g===void 0&&(g=1);for(var k=0;k<g;++k)for(e+=(i-e)*s,o.forEach(function(p){p(e)}),f=0;f<y;++f)x=t[f],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return n}function h(){for(var g=0,f=t.length,y;g<f;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var x=ge*Math.sqrt(.5+g),k=g*ye;y.x=x*Math.cos(k),y.y=x*Math.sin(k)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function m(g){return g.initialize&&g.initialize(t,u),g}return h(),n={tick:_,restart:function(){return c.restart(w),n},stop:function(){return c.stop(),n},nodes:function(g){return arguments.length?(t=g,h(),o.forEach(m),n):t},alpha:function(g){return arguments.length?(e=+g,n):e},alphaMin:function(g){return arguments.length?(r=+g,n):r},alphaDecay:function(g){return arguments.length?(s=+g,n):+s},alphaTarget:function(g){return arguments.length?(i=+g,n):i},velocityDecay:function(g){return arguments.length?(a=1-g,n):1-a},randomSource:function(g){return arguments.length?(u=g,o.forEach(m),n):u},force:function(g,f){return arguments.length>1?(f==null?o.delete(g):o.set(g,m(f)),n):o.get(g)},find:function(g,f,y){var x=0,k=t.length,p,N,M,T,E;for(y==null?y=1/0:y*=y,x=0;x<k;++x)T=t[x],p=g-T.x,N=f-T.y,M=p*p+N*N,M<y&&(E=T,y=M);return E},on:function(g,f){return arguments.length>1?(d.on(g,f),n):d.on(g)}}}function we(){var t,n,e,r,s=B(-30),i,a=1,o=1/0,c=.81;function d(h){var m,g=t.length,f=K(t,ue,he).visitAfter(w);for(r=h,m=0;m<g;++m)n=t[m],f.visit(_)}function u(){if(t){var h,m=t.length,g;for(i=new Array(m),h=0;h<m;++h)g=t[h],i[g.index]=+s(g,h,t)}}function w(h){var m=0,g,f,y=0,x,k,p;if(h.length){for(x=k=p=0;p<4;++p)(g=h[p])&&(f=Math.abs(g.value))&&(m+=g.value,y+=f,x+=f*g.x,k+=f*g.y);h.x=x/y,h.y=k/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=i[g.data.index];while(g=g.next)}h.value=m}function _(h,m,g,f){if(!h.value)return!0;var y=h.x-n.x,x=h.y-n.y,k=f-m,p=y*y+x*x;if(k*k/c<p)return p<o&&(y===0&&(y=F(e),p+=y*y),x===0&&(x=F(e),p+=x*x),p<a&&(p=Math.sqrt(a*p)),n.vx+=y*h.value*r/p,n.vy+=x*h.value*r/p),!0;if(h.length||p>=o)return;(h.data!==n||h.next)&&(y===0&&(y=F(e),p+=y*y),x===0&&(x=F(e),p+=x*x),p<a&&(p=Math.sqrt(a*p)));do h.data!==n&&(k=i[h.data.index]*r/p,n.vx+=y*k,n.vy+=x*k);while(h=h.next)}return d.initialize=function(h,m){t=h,e=m,u()},d.strength=function(h){return arguments.length?(s=typeof h=="function"?h:B(+h),u(),d):s},d.distanceMin=function(h){return arguments.length?(a=h*h,d):Math.sqrt(a)},d.distanceMax=function(h){return arguments.length?(o=h*h,d):Math.sqrt(o)},d.theta=function(h){return arguments.length?(c=h*h,d):Math.sqrt(c)},d}function xe(t){var n=B(.1),e,r,s;typeof t!="function"&&(t=B(t==null?0:+t));function i(o){for(var c=0,d=e.length,u;c<d;++c)u=e[c],u.vx+=(s[c]-u.x)*r[c]*o}function a(){if(e){var o,c=e.length;for(r=new Array(c),s=new Array(c),o=0;o<c;++o)r[o]=isNaN(s[o]=+t(e[o],o,e))?0:+n(e[o],o,e)}}return i.initialize=function(o){e=o,a()},i.strength=function(o){return arguments.length?(n=typeof o=="function"?o:B(+o),a(),i):n},i.x=function(o){return arguments.length?(t=typeof o=="function"?o:B(+o),a(),i):t},i}function _e(t){var n=B(.1),e,r,s;typeof t!="function"&&(t=B(t==null?0:+t));function i(o){for(var c=0,d=e.length,u;c<d;++c)u=e[c],u.vy+=(s[c]-u.y)*r[c]*o}function a(){if(e){var o,c=e.length;for(r=new Array(c),s=new Array(c),o=0;o<c;++o)r[o]=isNaN(s[o]=+t(e[o],o,e))?0:+n(e[o],o,e)}}return i.initialize=function(o){e=o,a()},i.strength=function(o){return arguments.length?(n=typeof o=="function"?o:B(+o),a(),i):n},i.y=function(o){return arguments.length?(t=typeof o=="function"?o:B(+o),a(),i):t},i}const pe="X",ve="Y",me="charge",ke="link",lt=.01,at=.1,Ne=Math.log(lt)/Math.log(1-at);function ft(t,n,e,r){const s=async()=>{a.value.stop(),a.value=i(),r.value.static?a.value.tick(Ne):a.value.restart()},i=()=>{const o=de().stop().alphaMin(lt).alphaDecay(at).nodes(t.value);return o.force(pe,xe(e.value.width/2).strength(r.value.force.x)),o.force(ve,_e(e.value.height/2).strength(r.value.force.y)),o.force(me,we().strength(r.value.force.charge)),o.force(ke,te(n.value).id(c=>{if(!("id"in c))throw new Error("Node id is undefined");return c.id})),o},a=l.ref(i());return G.watchDebounced([()=>l.toValue(t).length,()=>l.toValue(n).length,e],async()=>s(),{debounce:100,maxWait:1e3}),G.watchDebounced(()=>r.value,async()=>s(),{deep:!0,debounce:100,maxWait:1e3}),{simulation:a,refresh:s}}const Ae=.5,Me=.5,Ee=-350,ze=40,Te=10,Ce=2,be=t=>{const n=l.computed(()=>{var i,a,o,c,d,u,w,_,h,m,g,f,y,x,k,p,N,M,T,E,A,v,D,z,ct,ut,ht,gt,yt,dt,wt,xt,_t,pt,vt,mt,kt,Nt,At,Mt,Et,zt,Tt,Ct,bt,Bt,Dt,St;return{node:{stroke:((o=(a=(i=t.value)==null?void 0:i.nodes)==null?void 0:a.colors)==null?void 0:o.stroke)||"#E2EB98",fill:((u=(d=(c=t.value)==null?void 0:c.nodes)==null?void 0:d.colors)==null?void 0:u.fill)||"#93A392",selected:{stroke:((m=(h=(_=(w=t.value)==null?void 0:w.nodes)==null?void 0:_.colors)==null?void 0:h.selected)==null?void 0:m.stroke)||"#9DC4B5",fill:(x=(y=(f=(g=t.value)==null?void 0:g.nodes)==null?void 0:f.colors)==null?void 0:y.selected)==null?void 0:x.fill},hover:{stroke:"#9DC4B5",fill:(M=(N=(p=(k=t.value)==null?void 0:k.nodes)==null?void 0:p.colors)==null?void 0:N.hover)==null?void 0:M.fill},pinned:{stroke:"#9DC4B5",fill:(v=(A=(E=(T=t.value)==null?void 0:T.nodes)==null?void 0:E.colors)==null?void 0:A.pinned)==null?void 0:v.fill},label:{fill:((ut=(ct=(z=(D=t.value)==null?void 0:D.nodes)==null?void 0:z.colors)==null?void 0:ct.label)==null?void 0:ut.fill)||"#93A392"}},link:{stroke:((yt=(gt=(ht=t.value)==null?void 0:ht.links)==null?void 0:gt.colors)==null?void 0:yt.stroke)||"#BAD9A2",fill:(xt=(wt=(dt=t.value)==null?void 0:dt.links)==null?void 0:wt.colors)==null?void 0:xt.fill,selected:{stroke:((mt=(vt=(pt=(_t=t.value)==null?void 0:_t.links)==null?void 0:pt.colors)==null?void 0:vt.selected)==null?void 0:mt.stroke)||"#9DC4B5",fill:(Mt=(At=(Nt=(kt=t.value)==null?void 0:kt.links)==null?void 0:Nt.colors)==null?void 0:At.selected)==null?void 0:Mt.fill},hover:{stroke:"#9DC4B5",fill:(Ct=(Tt=(zt=(Et=t.value)==null?void 0:Et.links)==null?void 0:zt.colors)==null?void 0:Tt.hover)==null?void 0:Ct.fill},label:{fill:((St=(Dt=(Bt=(bt=t.value)==null?void 0:bt.links)==null?void 0:Bt.colors)==null?void 0:Dt.label)==null?void 0:St.fill)||"#93A392"}}}}),e=l.computed(()=>{var i,a,o,c,d,u,w,_;return{static:((a=(i=t.value)==null?void 0:i.simulation)==null?void 0:a.static)||!1,force:{x:((c=(o=t.value)==null?void 0:o.simulation)==null?void 0:c.force.x)||Ae,y:((u=(d=t.value)==null?void 0:d.simulation)==null?void 0:u.force.y)||Me,charge:((_=(w=t.value)==null?void 0:w.simulation)==null?void 0:_.force.charge)||Ee}}}),r=l.computed(()=>{var i,a,o,c,d;return{size:((a=(i=t.value)==null?void 0:i.nodes)==null?void 0:a.size)||ze,font:{size:((d=(c=(o=t.value)==null?void 0:o.nodes)==null?void 0:c.font)==null?void 0:d.size)||Te}}}),s=l.computed(()=>{var i,a;return{width:((a=(i=t.value)==null?void 0:i.links)==null?void 0:a.width)||Ce}});return{simulation:e,theme:n,nodes:r,links:s}},Be=["viewBox"],De={id:"l-links",class:"links"},Se=["id","d","onClick","onTouchstartPassive"],Pe={id:"l-nodes",class:"nodes"},Fe=["viewBox","width","height","x","y","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive","innerHTML"],Le=["r","cx","cy","title","onClick","onTouchendPassive","onMousedown","onTouchstartPassive"],Oe={id:"node-labels",class:"labels"},Ie=["x","y","font-size","stroke-width"],Re=l.defineComponent({__name:"D3NetworkGraph",props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0},options:{type:Object,default:void 0}},emits:["node-click","link-click"],setup(t,{emit:n}){var T;const e=t;l.useCssVars(E=>({"5c900d73":l.unref(r).node.stroke,"348d1f7e":l.unref(r).node.fill,b7f3a722:l.unref(r).node.selected.stroke||l.unref(r).node.stroke,"5b513362":l.unref(r).node.selected.fill||l.unref(r).node.fill,"6c8582ec":l.unref(r).node.pinned.stroke||l.unref(r).node.stroke,"0257834c":l.unref(r).node.pinned.fill||l.unref(r).node.fill,"4786150c":l.unref(r).node.hover.stroke||l.unref(r).node.stroke,"27da6cda":l.unref(r).node.hover.fill||l.unref(r).node.fill,"99fd370a":l.unref(r).link.stroke,"900ecef4":l.unref(r).link.fill,"15e88208":l.unref(r).link.selected.stroke,"7d33b553":l.unref(r).link.selected.fill,"32e5b625":l.unref(r).node.hover.stroke,f58d66a0:l.unref(r).node.hover.fill,d9aa0600:l.unref(r).link.label.fill,"12cc69f8":l.unref(r).node.label.fill}));const{theme:r,simulation:s,nodes:i,links:a}=be(l.toRef(()=>e.options)),o=l.ref(null),c=l.ref({width:100,height:100});G.useResizeObserver(o,E=>{const A=E[0];c.value={width:A.contentRect.width,height:A.contentRect.height}});const{simulation:d}=ft(l.toRef(()=>e.nodes),l.toRef(()=>e.links),c,s),{dragStart:u,dragEnd:w,move:_}=Pt(d,(T=e.options)==null?void 0:T.draggables),{label:h,getSize:m,getWidth:g,getClass:f,getHeight:y,getStyle:x}=Ft(i),{getPath:k,getAttrs:p,getClass:N,getStyle:M}=Lt(a);return(E,A)=>(l.openBlock(),l.createElementBlock("svg",{ref_key:"svg",ref:o,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMinYMin",viewBox:`0 0 ${c.value.width} ${c.value.height}`,class:"svg-container",onMouseup:A[0]||(A[0]=(...v)=>l.unref(w)&&l.unref(w)(...v)),onTouchendPassive:A[1]||(A[1]=(...v)=>l.unref(w)&&l.unref(w)(...v)),onTouchstartPassive:A[2]||(A[2]=async()=>{}),onMousemove:A[3]||(A[3]=(...v)=>l.unref(_)&&l.unref(_)(...v))},[l.createElementVNode("g",De,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.links,v=>(l.openBlock(),l.createElementBlock("path",l.mergeProps({id:v.id,key:v.id,d:l.unref(k)(v)},l.unref(p)(v),{class:l.unref(N)(v.id),style:l.unref(M)(v),onClick:D=>n("link-click",D,v),onTouchstartPassive:D=>n("link-click",D,v)}),null,16,Se))),128))]),l.createElementVNode("g",Pe,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.nodes,(v,D)=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:D},[v.innerSVG?(l.openBlock(),l.createElementBlock("svg",{key:0,viewBox:v.innerSVG.viewBox,width:l.unref(g)(v),height:l.unref(y)(v),x:(v.x||0)-l.unref(g)(v)/2,y:(v.y||0)-l.unref(y)(v)/2,style:l.normalizeStyle(l.unref(x)(v)),title:v.name,class:l.normalizeClass(l.unref(f)(v,["node-svg"])),onClick:z=>n("node-click",z,v),onTouchendPassive:z=>n("node-click",z,v),onMousedown:l.withModifiers(z=>l.unref(u)(z,D),["prevent"]),onTouchstartPassive:l.withModifiers(z=>l.unref(u)(z,D),["prevent"]),innerHTML:v.innerSVG.innerHtml},null,46,Fe)):(l.openBlock(),l.createElementBlock("circle",{key:1,r:l.unref(m)(v)/2,cx:v.x||0,cy:v.y||0,style:l.normalizeStyle(l.unref(x)(v)),title:v.name,class:l.normalizeClass(l.unref(f)(v)),onClick:z=>E.$emit("node-click",z,v),onTouchendPassive:z=>E.$emit("node-click",z,v),onMousedown:l.withModifiers(z=>l.unref(u)(z,D),["prevent"]),onTouchstartPassive:l.withModifiers(z=>l.unref(u)(z,D),["prevent"])},null,46,Le))],64))),128))]),l.createElementVNode("g",Oe,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.nodes,v=>(l.openBlock(),l.createElementBlock("text",{key:v.id,class:"node-label",x:(v.x||0)+l.unref(m)(v)/2+l.unref(h).font.size/2,y:(v.y||0)+l.unref(h).offset.y,"font-size":l.unref(h).font.size,"stroke-width":l.unref(h).font.size/8},l.toDisplayString(v.name),9,Ie))),128))])],40,Be))}}),je="";S.D3NetworkGraph=Re,S.useSimulation=ft,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
